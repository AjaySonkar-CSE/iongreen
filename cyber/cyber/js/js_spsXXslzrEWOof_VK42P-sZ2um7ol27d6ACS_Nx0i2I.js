/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($,Drupal){window.waitForAOS(()=>{AOS.init({duration:2400});$('.js-load-more').on('click',function(){var $content=$(this).next('.js-more-content');$content.animate({height:750},500);});onElementHeightChange(document.body,function(){AOS.refresh();});});function onElementHeightChange(elm,callback){var lastHeight=elm.clientHeight;var newHeight;(function run(){newHeight=elm.clientHeight;if(lastHeight!==newHeight)callback();lastHeight=newHeight;if(elm.onElementHeightChangeTimer)clearTimeout(elm.onElementHeightChangeTimer);elm.onElementHeightChangeTimer=setTimeout(run,200);})();}$(document).ready(function(){var scrollTop=$(".scrollTop");$(window).scroll(function(){var topPos=$(this).scrollTop();if(topPos>100)$(scrollTop).css("opacity","1");else $(scrollTop).css("opacity","0");});$(scrollTop).click(function(){$('html, body').animate({scrollTop:0},800);return false;});});let subMenutoggle=document.querySelectorAll('.toggle-link');subMenutoggle.forEach(subMenuHandler);function subMenuHandler(items){items.addEventListener('click',function(){this.parentNode.classList.toggle('active');});}const hamBurger=document.getElementById('menu-toggle');const slideNav=document.getElementById('slide-nav');const closeNav=document.getElementById('close-menu');const headerSec=document.querySelector('header');if(hamBurger)hamBurger.addEventListener('click',offcanvasMenu);if(closeNav)closeNav.addEventListener('click',hideOffcanvasMenu);function offcanvasMenu(){slideNav.classList.add('show');headerSec.classList.add('active');}function hideOffcanvasMenu(){slideNav.classList.remove('show');headerSec.classList.remove('active');}function hidesearchOffcanvasMenu(){slideNav.classList.remove('show');headerSec.classList.remove('active');}let menuChildItem=document.querySelectorAll('.menu-item-has-children');menuChildItem.forEach(classAdd);function classAdd(items){const childMenu=document.createElement("span");childMenu.classList.add('res-submenu');items.appendChild(childMenu);}let subMenu=document.querySelectorAll('.res-submenu');subMenu.forEach(subMenuHandler);function subMenuHandler(items){items.addEventListener('click',function(){this.parentNode.classList.toggle('active');this.classList.toggle('active');});}var lastScroll=0;var isScrolled=false;window.addEventListener("scroll",function(){var topHeader=document.querySelector("body");var currentScroll=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;var scrollDirection=currentScroll<lastScroll;var shouldToggle=isScrolled&&scrollDirection;isScrolled=currentScroll>100;topHeader.classList.toggle("fixed-header",shouldToggle);lastScroll=currentScroll;});searchIcon=document.getElementById('search-click');searchIconMob=document.getElementById('search-clickmob');searchMain=document.getElementById('search-main');closeSearch=document.getElementById('closeSearch');closeSearchMob=document.getElementById('closeSearch-mob');function searchMainFunction(){searchMain.classList.add('show');}function searchMainFunctionMob(){searchMain.classList.add('show');}function closeSearchMainFunction(){searchMain.classList.remove('show');}function closeSearchMainFunctionMob(){searchMain.classList.remove('show');}if(searchIconMob)searchIconMob.addEventListener('click',searchMainFunctionMob);if(searchIcon)searchIcon.addEventListener('click',searchMainFunction);if(closeSearch)closeSearch.addEventListener('click',closeSearchMainFunction);if(closeSearchMob)closeSearchMob.addEventListener('click',closeSearchMainFunctionMob);})(jQuery,Drupal);enqClick=document.getElementById('enq-click');enqForm=document.getElementById('enq-form');closeEnqForm=document.getElementById('closenquiform');function enquireFunction(){enqForm.classList.add('show');}function CloseenquireFunction(){enqForm.classList.remove('show');}if(enqClick)enqClick.addEventListener('click',enquireFunction);if(enqClick)enqClick.addEventListener('click',CloseenquireFunction);jQuery(document).on("scroll",function(){if(jQuery('body').hasClass('page-node-type-homepage'))ShowHideFloatingIconsnotificHome();else ShowHideFloatingIconsnotific();});function ShowHideFloatingIconsnotificHome(){var viewportHeight=window.innerHeight;if(jQuery(document).scrollTop()>viewportHeight){jQuery("#notification").addClass("active");jQuery(".download-app").addClass("active");jQuery(".mobile-button-div").addClass("active");}else{jQuery("#notification").removeClass("active");jQuery(".download-app").removeClass("active");jQuery(".mobile-button-div").removeClass("active");}var latestlaunchposition=jQuery(".latest-launch-section").offset();var viewportHeightLP=latestlaunchposition.top;if(jQuery(document).scrollTop()>viewportHeightLP){jQuery("#enq-click").addClass("active");jQuery("#enq-form").addClass("active");}else{jQuery("#enq-click").removeClass("active");jQuery("#enq-form").removeClass("active");}}function ShowHideFloatingIconsnotific(){if(jQuery(document).scrollTop()>50){jQuery("#notification").addClass("active");jQuery(".download-app").addClass("active");jQuery("#enq-form").addClass("active");jQuery("#enq-click").addClass("active");jQuery(".mobile-button-div").addClass("active");}else{jQuery("#notification").removeClass("active");jQuery(".download-app").removeClass("active");jQuery("#enq-form").removeClass("active");jQuery("#enq-click").removeClass("active");jQuery(".mobile-button-div").removeClass("active");}}var bodyTag=document.getElementsByTagName("header")[0];var megamenumain=document.querySelectorAll('.megamenu');megamenumain.forEach(MegaMenuHandler);function MegaMenuHandler(items){items.addEventListener('mouseenter',function(){bodyTag.classList.add('flowremove');});}var bodyTagRemove=document.getElementsByTagName("header")[0];var megamenumainRemove=document.querySelectorAll('.megamenu');megamenumainRemove.forEach(MegaMenuHandlerRemove);function MegaMenuHandlerRemove(items){items.addEventListener('mouseleave',function(){bodyTag.classList.remove('flowremove');});}jQuery(window).scroll(function(){console.log("scroll");var scroll=jQuery(window).scrollTop();if(scroll>=5)jQuery("body").addClass("fixed-header");else jQuery("body").removeClass("fixed-header");});const targetModal=document.getElementById('downloadAppModal');if(targetModal){targetModal.addEventListener('shown.bs.modal',function(){const backdrop=document.querySelector('.modal-backdrop');if(backdrop)backdrop.classList.add('custom-backdrop');});targetModal.addEventListener('hidden.bs.modal',function(){const backdrop=document.querySelector('.modal-backdrop');if(backdrop)backdrop.classList.remove('custom-backdrop');});}if(document.getElementById('d-app-content'))document.getElementById('d-app-content').addEventListener('click',function(){document.getElementById('d-app-content').classList.add('active');});if(document.querySelector('.d-app-close'))document.querySelector('.d-app-close').addEventListener('click',function(){document.getElementById('d-app-content').classList.remove('active');});document.addEventListener('DOMContentLoaded',()=>{const closeBtn=document.querySelector('.close-d-app');const appContent=document.querySelector('.download-app');if(closeBtn&&appContent)closeBtn.addEventListener('click',()=>{appContent.classList.add('closed');});});document.addEventListener("DOMContentLoaded",function(){const moreText=document.querySelector(".moretext");const button=document.querySelector(".moreless-button");if(button)button.addEventListener("click",function(){moreText.classList.toggle("active");const isActive=moreText.classList.contains("active");button.textContent=isActive?"Read less":"Read more";button.setAttribute("aria-label",isActive?"Collapse content":"Read more to expand content");});});console.clear();const dropdowns=document.querySelectorAll('.dropdown');dropdowns.forEach((dropdown)=>{dropdown.addEventListener('click',(e)=>{dropdown.classList.toggle('dropdown__options--visible');});dropdown.querySelectorAll('.dropdown__options .dropdown__option').forEach((opt)=>{opt.addEventListener('click',(e)=>{dropdown.querySelector('.dropdown__selected').innerHTML=opt.innerHTML;});});});;
function addClassClick(){return true;}function removeClassClick(){return true;}(function($,Drupal){Drupal.behaviors.appendUTMParams={attach:function(context,settings){function getUrlParams(){let params={};let queryString=window.location.search.substring(1);let regex=/([^&=]+)=([^&]*)/g,match;while((match=regex.exec(queryString))!==null){let paramName=decodeURIComponent(match[1]).toLowerCase();let paramValue=decodeURIComponent(match[2]);if(paramName.startsWith('utm_'))params[paramName]=paramValue;}return params;}let utmParams=getUrlParams();if(Object.keys(utmParams).length>0){if($('#enq-form .eng-buton-list.call-us').length>0)$('#enq-form .eng-buton-list.call-us').remove();jQuery(document).ready(function(){if($('.sliding-form.ppc-enquiry-form').length>0)setTimeout(function(){var slidingForm=once('slideFormOpen','.sliding-form.ppc-enquiry-form');$(slidingForm).addClass('active');},10000);});let $form=$('.webform-submission-form');$.each(utmParams,function(name,value){$form.find(`input[name="${name}"]`).remove();$form.append(`<input type="hidden" name="${name}" value="${value}">`);});}jQuery(once("closeSlideForm",'#slidingform .close-sliding-form')).on('click',function(){jQuery('#slidingform').removeClass('active').trigger('hidden.sobha.slidingModal');});}};Drupal.behaviors.customLoadMorePropertyListingPages={attach:function(context,settings){const container=context.querySelector('.prop-unit-type-list .row');if(!container)return;if(typeof once==='function'&&once('customLoadMore',container).length===0)return;loadMoreRows(container,6,'#pagination');}};function loadMoreRows(container,rowsPerPage=6,paginationSelector='#pagination'){const rows=Array.from(container.children);const pagination=document.querySelector(paginationSelector);if(!pagination||rows.length===0)return;let currentCount=0;const totalRows=rows.length;rows.forEach((row)=>(row.style.display='none'));pagination.innerHTML='';const btn=document.createElement('button');btn.textContent=Drupal.t('Load More');btn.classList.add('button-1','view-all');btn.style.background='transparent';btn.setAttribute('data-translated-text','Load more');btn.setAttribute('title','Load more items');btn.setAttribute('rel','next');const icon=document.createElement('i');btn.appendChild(icon);pagination.appendChild(btn);function showMore(){const nextCount=currentCount+rowsPerPage;rows.slice(currentCount,nextCount).forEach((row)=>(row.style.display='block'));currentCount=nextCount;if(currentCount>=totalRows)btn.style.display='none';}showMore();btn.addEventListener('click',showMore);}})(jQuery,Drupal);(function($){jQuery('.nav-links li').on('mouseenter',function(){jQuery('select').blur();});function hideExposedFilters(){if($('.prop-default-list #noresult').length>0){$('.desktop-filter-section').hide();$('.mobile-button-div').hide();$('.filter-main.sort-filter-for-desktop').hide();}}hideExposedFilters();jQuery(document).ready(function(){hideExposedFilters();});$('.blinking-marker').mouseleave(function(e){$('.mapboxgl-popup').hide();});$('.audio-icon').click(function(){if($(this).hasClass('active')){$(this).removeClass('active');$('.home-banner video').prop('muted',false);}else{$(this).addClass('active');$('.home-banner video').prop('muted',true);}});$(document).ready(function(){});var curPth=$(location).attr('href');if(curPth.indexOf('properties-in-dubai/penthouses-for-sale-in-dubai')!=-1){var chkNoProperties=$('.prop-default-list #noresult').length;if(chkNoProperties>0){$('.desktop-filter-section').hide();$('.listing-section-wrapper .row').hide();$('.mobile-button-div').hide();$('.listing-section-wrapper').html('<div class="row"><div class="col-12"><div class="no-pro-wrapper">'+Drupal.t('<h4>All Penthouses Sold Out!</h4><p>Our stunning penthouses have found their new owners! Stay tuned for the grand reveal of our next line-up of extraordinary residences.</p>')+'</div></div></div>');$('#footer-common-form .planning-row .planning-col:first').hide();}}$('.custom-close-btn').on('click',function(){$('.custom-popup-overlay').remove();});$('.read-more-toggle').on('click',function(e){e.preventDefault();var $this=$(this);var $shortDescription=$this.siblings('.description-short');var $fullDescription=$this.siblings('.description-full');if($fullDescription.is(':visible')){$fullDescription.slideUp();$shortDescription.slideDown();$this.text('Read More');}else{$fullDescription.slideDown();$shortDescription.slideUp();$this.text('Read Less');}});var currentPath=window.location.pathname;const pattern=/^(?:\/[a-z]{2})?\/our-communities\/[^/]+\/?$/;var comLang=$('html').attr('lang');if(comLang=='en')comLang='';else comLang='/'+comLang;if(pattern.test(currentPath)){const updatedPath=currentPath.replace(comLang,"");$.post(comLang+"/get-community-details?alias="+updatedPath,function(communityData){if(web_engage_enabled==true)try{webengage.track("Property Viewed",{"Project Name":communityData.projectName,"Project Id":communityData.projectId,"Image":communityData.imagePath});}catch(e){console.log(e);}},"json");}$('#notification').on('click',function(event){console.log("Bell button clicked");if(web_engage_enabled==true)try{webengage.track("Bell button clicked");return true;}catch(e){console.log(e);return true;}});$('a.language-link').on('click',function(event){var selectedLanguage=$(this).attr('hreflang');console.log("Selected Language: "+selectedLanguage);if(web_engage_enabled==true)try{webengage.track("Language Button Clicked / Selected",{"Language":selectedLanguage});return true;}catch(e){console.log(e);return true;}});$('a.button-1').click(function(e){if($(this).data("title")&&$(this).data("nid")){var projectName=$(this).data("title");var projectId=$(this).data("nid");BannerClicked(projectName,'',projectId);}});var propertyListingSortChange=false;var propertyUnitSortEnabled=false;if($('.filter-main.sort-filter-for-desktop select').length>0||$('form.views-exposed-form .filter-main.sort-filter-for-mobile select').length>0)$(`.filter-main.sort-filter-for-desktop select, form.views-exposed-form .filter-main.sort-filter-for-mobile select`).change(function(e){let value=$(this).find('option:selected').data('value');let originalSortValue=value;$(`.filter-main.sort-filter-for-desktop select option, 
          form.views-exposed-form .filter-main.sort-filter-for-mobile select option`).each(function(){if($(this).data('value')===value)$(this).prop('selected',true);});if(propertyUnitSortEnabled)if($(this).find('option:selected').data('unit-value')!='random_seed_ASC')originalSortValue=$(this).find('option:selected').data('unit-value');$('form.views-exposed-form .prop-listing-hidden-sort select[name="sort_bef_combine"]').val(originalSortValue).trigger('change');$('form.views-exposed-form').find('button[type="submit"][data-twig-suggestion="property_search_submit"]').trigger('click');propertyListingSortChange=true;});$('#edit-submit-properties-in-dubai, #edit-submit-properties-mapping').on('click',function(e){$('html, body').animate({scrollTop:$(".listing-wrapper").offset().top},0);var th=$(this);setTimeout(function(){if($('.prpListTypeId').length>0)if($('#edit-field-number-of-bedrooms-target-id').val()!='All'||$('#edit-field-price-range-target-id').val()!='All'||$('#edit-field-city-target-id').val()!='All'||$('#edit-field-property-location-target-id').val()!='All'||propertyListingSortChange){if(th[0].id=='edit-submit-properties-mapping'&&$('.prop-unit-type-list').is(":hidden")){$('.prop-default-list').hide();$('.prop-unit-type-list .views-infinite-scroll-content-wrapper').empty();$('.prop-unit-type-list .pager').hide();$('.prop-unit-type-list').show();}}else{$('.prop-unit-type-list').hide();$('.prop-default-list').show();}else if($('#edit-field-property-type-target-id').val()!=''||$('#edit-field-number-of-bedrooms-target-id').val()!='All'||$('#edit-field-price-range-target-id').val()!='All'||$('#edit-field-city-target-id').val()!='All'||$('#edit-field-property-location-target-id').val()!='All'||propertyListingSortChange){if(th[0].id=='edit-submit-properties-mapping'&&$('.prop-unit-type-list').is(":hidden")){$('.prop-default-list').hide();$('.prop-unit-type-list .views-infinite-scroll-content-wrapper').empty();$('.prop-unit-type-list .pager').hide();$('.prop-unit-type-list').show();}}else{$('.prop-unit-type-list').hide();$('.prop-default-list').show();}},0);$('.desktop-filter-section').addClass('has-overlay');$('.desktop-filter-section').prepend("<div class='overlay-loader'><img class='filter-loader' src='/themes/sobha_uplift/images/filter-loader.svg' alt='Loader' /></div>");$(this).find('.ajax-throb-filter').html('<div class="ajax-progress ajax-progress-throbber"><div class="throbber">&nbsp;</div></div>');var property_type_id=$('#edit-field-property-type-target-id').val();var bedrooms_id=$('#edit-field-number-of-bedrooms-target-id').val();var price_id=$('#edit-field-price-range-target-id').val();var location_id=$('#edit-field-property-location-target-id').val();if(!resetBtnClicked){console.log("Filter Properties clicked");var property_type_name_list=$('#edit-field-property-type-target-id option:selected').toArray().map((item)=>item.text).join(', ');var bedrooms_name_list=$('#edit-field-number-of-bedrooms-target-id option:selected').toArray().map((item)=>item.text).join(', ');var price_name_list=$('#edit-field-price-range-target-id option:selected').toArray().map((item)=>item.text).join(', ');var property_location_list=$('#edit-field-property-location-target-id option:selected').toArray().map((item)=>item.text).join(', ');let projectCategory='';switch(price_name_list.toLowerCase()){case "aed < 5m":projectCategory='b';break;case "aed 5m+ - 10m":projectCategory='b+';break;case "aed 20m+":projectCategory='a';break;default:projectCategory='';break;}try{webengage.track("Find Properties",{"Type":property_type_name_list||'All',"Bedrooms":bedrooms_name_list||'',"Price":price_name_list||'',"Location":property_location_list||'',"Project Category":projectCategory});}catch(e){console.log(e);}}setTimeout(function(){th.find('.ajax-throb-filter').html('');$('.desktop-filter-section').removeClass('has-overlay');$('.desktop-filter-section .overlay-loader').remove();$('.pager').find('.ajax-throb').html('');if(th[0].id=='edit-submit-properties-mapping')$('.prop-unit-type-list .pager').show();},2000);});(function($,Drupal){Drupal.behaviors.webformcustom={attach:function(context,settings){$(document).ajaxComplete(function(event,xhr,settings){if($('.custom-popup-overlay').length>0){if($("#enquiryModal").hasClass('show'))$("#enquiryModal").modal('hide');if(jQuery('#slidingform').hasClass('active'))jQuery('#slidingform').removeClass('active');if(jQuery('#channelPartnerRegistration').hasClass('show'))jQuery('#channelPartnerRegistration').modal('hide');$('.custom-popup-overlay .custom-popup-content .custom-close-btn').remove();var succssMSG=$('.custom-popup-overlay .custom-popup-content').html();$('#webformSuccessMsg .modal-body').html(succssMSG);$('#webformSuccessMsg').modal('show');$('.custom-popup-overlay').remove();}});}};})(jQuery,Drupal);$(function(){var currPath=window.location.pathname;$('header .nav-links a.level-1-menu').each(function(){var curHref=$(this).attr('href');if(currPath==curHref){$(this).addClass('is-active');return false;}});$('.megamenu-contents .normal-sub-menu-list').remove();$('.not-mega-menu div.community-contents').remove();$('.megamenu-contents .mobile-megamenu-sub-link').each(function(){var mLink=$(this).html();var targetId=$(this).closest('.community-contents').attr('data-targtId');if(targetId=='1234')var styleAdd=' style="display:none" ';else var styleAdd='';$(this).closest('.mega-wrapper').find('.megamenu-sublink ul').append('<li class="community-menu showSingle" '+styleAdd+' target="'+targetId+'">'+mLink+'</li>');});$('.megamenu-sublink li').each(function(){var tId=$(this).attr('target');var trgt=$(this);var levl3Items='';$(this).closest('.mega-wrapper').find('.meg-column-right .community-content-'+tId+' .megamenu-sub-menus .mega-cont-col-1').each(function(){levl3Items=levl3Items+$.trim($(this).find('ul.meg-level-menu').html());});$(this).closest('.mega-wrapper').find('.meg-column-right .community-content-'+tId+' .megamenu-sub-menus .mega-full-width-img').each(function(){levl3Items=levl3Items+$.trim($(this).html());});if(levl3Items=='')$(trgt).addClass('no-sublink');});$('.megamenu-contents .community-contents').each(function(){var trgt=$(this);var levl3Items='';$(this).find('.megamenu-sub-menus .mega-cont-col-1').each(function(){levl3Items=levl3Items+$.trim($(this).find('ul.meg-level-menu').html());});$(this).find('.mega-full-width-img').each(function(){levl3Items=levl3Items+$.trim($(this).html());});if(levl3Items=='')$(trgt).find('h3.mobile-megamenu-sub-link').addClass('no-sublink');});$('header .megamenu-sublink a').each(function(){var curHref=$(this).attr('href');if(currPath==curHref){$(this).closest('.menu-item-has-children').find('.level-1-menu').addClass('is-active');return false;}});$('#showall').hover(function(){$('.targetDiv').show();});$('.showSingle').hover(function(){$('.targetDiv').hide();var targId=$(this).attr('target');var defaultImg=$(this).closest('.mega-wrapper').find('.community-content-'+targId+' .megamenu-sub-menus .mega-default-hvr-img').html();$(this).closest('.mega-wrapper').find('.community-content-'+targId+' .megamenu-sub-menus .mega-hvr-img').html(defaultImg);$(this).closest('.mega-wrapper').find('.community-content-'+targId).show();});$('.nav-links .level-1-menu').hover(function(){if($(window).width()>1200){var level1Img=$(this).siblings('.level1-img').html();if(level1Img=='')$(this).siblings('.megamenu').find('.megamenu-sublink ul li.showSingle:first').trigger('mouseenter');else{$(this).siblings('.megamenu').find('.megamenu-contents .community-content-1234 .mega-full-width-img').html(level1Img);$(this).siblings('.megamenu').find('.megamenu-sublink ul li.showSingle:last').trigger('mouseenter');}}});$('ul.meg-level-menu li.level-4-list').hover(function(){var hoverImg=$(this).find('.level-4-img').html();if(hoverImg!='')$(this).closest('.megamenu-sub-menus').find('.mega-hvr-img').html(hoverImg);else{var hoverImg=$(this).closest('.megamenu-sub-menus').find('.mega-default-hvr-img').html();$(this).closest('.megamenu-sub-menus').find('.mega-hvr-img').html(hoverImg);}});$('.megamenu-contents .targetDiv').hover(function(){var targetVal=$(this).attr('data-targtid');$(this).closest('.mega-wrapper').find('.community-menu').each(function(){var cTarget=$(this).attr('target');if(targetVal==cTarget)$(this).addClass('hover-active');else $(this).removeClass('hover-active');});});$('.mega-wrapper .meg-column-left').hover(function(){$(".mega-wrapper .community-menu").removeClass("hover-active");});});let megamenuToggle=document.querySelectorAll('.menu-toggle-link');megamenuToggle.forEach(megaSubMenuHandler);function megaSubMenuHandler(items){items.addEventListener('click',function(){this.parentNode.classList.toggle('selected');});}let backmenu=document.querySelectorAll('.back-menu');var mainoffcanvas=document.querySelectorAll('.menu-item-has-children');backmenu.forEach(backmenuhandler);function backmenuhandler(items){items.addEventListener('click',function(){this.parentNode.parentNode.classList.remove('active');});}$('#btn_search').click(function(e){var searchTerm=$('#search').val();if(searchTerm!=null&&searchTerm!=""&&searchTerm!=undefined)if(web_engage_enabled==true)try{webengage.track("Search Button",{"Keyword":searchTerm,"Page URL":window.location.href});}catch(e){console.log(e);}});$('div.f-menu-links ul li a').click(function(e){var subcategory=$(this).text().trim();var category=$(this).closest('.f-links-div').find('.toggle-link').text();var href=$(this).attr('href');console.log('Category:',category);console.log('Subcategory:',subcategory);console.log('Href:',href);var host=window.location.origin;var pageUrl=host+href;CatgeoryClicked(category,subcategory,pageUrl);});$('a.level-1-menu').click(function(e){var category=$(this).text().trim();var subcategory="";var href=$(this).attr('href');console.log('Category:',category);console.log('Subcategory:',subcategory);console.log('Href:',href);var host=window.location.origin;var pageUrl=host+href;CatgeoryClicked(category,subcategory,pageUrl);});$(document).on('click','li.showSingle a',function(e){var category=$(this).closest('.menu-item-has-children').find('.level-1-menu').text().trim();var subcategory=$(this).text().trim();var href=$(this).attr('href');console.log('Category:',category);console.log('Subcategory:',subcategory);console.log('Href:',href);var host=window.location.origin;var pageUrl=host+href;CatgeoryClicked(category,subcategory,pageUrl);});function CatgeoryClicked(category,subcategory,pageUrl){console.log("Category Clicked",category,subcategory,pageUrl);if(web_engage_enabled==true)try{webengage.track("Category Clicked",{"Category Name":category,"Sub Category":subcategory,"Page URL":pageUrl});return true;}catch(e){console.log(e);return true;}}var curURL=$(location).attr("href");if(curURL.indexOf('?community=')!=-1){$('.desktop-filter-section').hide();$('.mobile-button-div a:first').hide();}var layoutDirection=$('html').attr('dir');if(layoutDirection=='rtl')$('.swiper').attr('dir','rtl');$(window).on('load',function(){});$('body').on('change','select[name="type"]',function(e){var prpTypeId=$(this).val();if(!prpTypeId)prpTypeId='All';var webforms=$(this).closest('form.webform-submission-form');if(e.isTrigger==undefined)$(webforms).each(function(_,form){$(form).find('select[name="property_type"]').val('All').trigger("change");});updateProprtyTypeFilter(prpTypeId);});function updateProprtyTypeFilter(prpTypeId){var prpListLang=$('html').attr('lang');var currentPath=$(location).attr("pathname");if($('#wishlist-container').length>0)currentPath='/wishlist';if(prpListLang=='en')prpListLang='';else prpListLang='/'+prpListLang;if(currentPath=='/wishlist/'||currentPath=='/wishlist'){var prop_ids='';$("a.wishlist-remove").each(function(index){if(prop_ids!='')prop_ids=prop_ids+',';prop_ids=prop_ids+$(this).attr('data-pid');});if(prop_ids=='')$('#footer-common-form').hide();else{$('#footer-common-form').show();$.post(prpListLang+"/get-seo-properties/"+prop_ids+"/"+prpTypeId,function(data){$('select[name="property_type"]').html(data.property_types);if($('select[name="property_type"] option').length==2){$('select[name="property_type"] option:last').attr("selected","selected");$('select[name="property_type"]').trigger("change");}},"json");}}else if($('body').hasClass('page-node-type-communities')){var comNodeId=$('.community_node_id').val();$.post(prpListLang+"/get-com-properties/"+comNodeId+"/"+prpTypeId,function(data){$('select[name="property_type"]').html(data.property_types);if($('select[name="property_type"]').eq(0).find('option').length==2){$('select[name="property_type"] option:not(:last)').remove();$('select[name="property_type"]').find('option:last').attr("selected","selected");$('select[name="property_type"]').trigger("change").addClass('disabled-ui');$('.form-sec-row.type').hide();}},"json");}else if($('body').hasClass('page-node-type-seo-landing-page')){var prop_ids=$.trim($('.availableProps').text());$.post(prpListLang+"/get-seo-properties/"+prop_ids+"/"+prpTypeId,function(data){$('select[name="property_type"]').html(data.property_types);if($('select[name="property_type"] option').length==2){$('select[name="property_type"] option:last').attr("selected","selected");$('select[name="property_type"]').trigger("change");}},"json");}else{var queryParams='';if($('#VRpopup').length>0&&$('body').hasClass('page-node-type-property-landing-page'))queryParams='?field_enable_digital_walkthrough=1';$.post(prpListLang+"/get-property-type-options/"+prpTypeId+queryParams,function(data){$('select[name="property_type"]').html(data.property_types);},"json");}}function getOptionValueByName(optionText){var value=$('select[name="type"] option').filter(function(){return $(this).text()===optionText;}).val();return value;}function setOptionSelectedByName(optionText){var $select=$('select[name="type"]');$select.find('option').each(function(){if($(this).text()===optionText)$(this).prop('selected',true);});$select.find('option').not(':selected').remove();}function setOptionSelectedByValue(value){$('select[name="type"]').val(value);}var currentPath=$(location).attr("pathname");function resetCommunityTypes(){var lang=$('html').attr('lang');if(lang=='en')langPrefix='';else langPrefix='/'+lang;var comNodeId=$('.community_node_id').val();$.post(langPrefix+"/get-types/"+comNodeId,function(data){var typeCount=data.property_types.length;$('select[name="type"] option').each(function(){var optVal=$(this).attr('value');if(optVal!='')if(jQuery.inArray(optVal,data.property_types)===-1)$(this).remove();else{if(typeCount==1){$('.webform-submission-register-your-interest-prop-detl-form .form-sec-row.type').hide();$(this).attr("selected","selected");}}});$('select[name="type"]').trigger("change");},"json");}function resetSEOTypes(){var currentPath=$(location).attr("pathname");if($('#wishlist-container').length>0)currentPath='/wishlist';var lang=$('html').attr('lang');if(lang=='en')langPrefix='';else langPrefix='/'+lang;if(currentPath=='/wishlist/'||currentPath=='/wishlist'){var seoProps='';$("a.wishlist-remove").each(function(index){if(seoProps!='')seoProps=seoProps+',';seoProps=seoProps+$(this).attr('data-pid');});}else var seoProps=$.trim($('.availableProps').text());if(seoProps=='')$('#footer-common-form').hide();else{$('#footer-common-form').show();$.post(langPrefix+"/get-seo-types/"+seoProps,function(data){var typeCount=data.property_types.length;$('select[name="type"] option').each(function(){var optVal=$(this).attr('value');if(optVal!='')if(jQuery.inArray(optVal,data.property_types)===-1)$(this).remove();else{if(typeCount==1){$('.webform-submission-register-your-interest-prop-detl-form .form-sec-row.type').hide();$(this).attr("selected","selected");}}});$('select[name="type"]').trigger("change");},"json");}}function resetPropTypes(){var lang=$('html').attr('lang');if(lang=='en')langPrefix='';else langPrefix='/'+lang;$.post(langPrefix+"/get-prop-types",function(data){var typeCount=data.property_types.length;$('select[name="type"] option').each(function(){var optVal=$(this).attr('value');if(optVal!='')if(jQuery.inArray(optVal,data.property_types)===-1)$(this).remove();else{if(typeCount==1){$('.webform-submission-register-your-interest-prop-detl-form .form-sec-row.type').hide();$(this).attr("selected","selected");}}});if($('.webform-submission-form select[name="type"] option').length==0||$('.prop-default-list #noresult').length>0)jQuery('#footer-common-form').hide();$('select[name="type"]').trigger("change");},"json");}if($(".prpListTypeId").length>0){$('body').addClass('disableType');var prpTypeId=$('.prpListTypeId').val();var propertyTypeName=$('.propertyTypeName').val();setOptionSelectedByName(propertyTypeName);updateProprtyTypeFilter(prpTypeId);$('select[name="type"]').css('pointer-events','none');}(function($,Drupal){Drupal.behaviors.propDetailForm={attach:function(context,settings){var propType=$('.webform-submission-register-your-interest-prop-detl-form #propType').eq(0).text();if(propType)setOptionSelectedByValue(propType);}};})(jQuery,Drupal);var resetBtnClicked=false;$('body').on('click','.exp-reset',function(){if($('.prpListTypeId').length>0){var prpListTypeId=$('.prpListTypeId').val();$('#edit-field-property-type-target-id').attr('disabled','disabled');resetExpFilter(prpListTypeId,true);}else{resetBtnClicked=true;resetExpFilter('All',true);}$(`.filter-main.sort-filter-for-desktop select option, 
      form.views-exposed-form .filter-main.sort-filter-for-mobile select option`).each(function(){if($(this).data('value')==='random_seed_ASC'){$(this).prop('selected',true);$(this).closest('select').trigger('change');}});propertyListingSortChange=false;});if(drupalSettings.sobha_event?.pageName)if(drupalSettings.sobha_event.pageName==="umm al quwain property list page"){const url=window.location.pathname;let exposedForm="#views-exposed-form-properties-mapping-block-6";if(url==='/ar/properties-for-sale-in-umm-al-quwain'||url==='/properties-for-sale-in-umm-al-quwain')if($(exposedForm).length>0){const $citySelect=$(exposedForm).find('select[name="field_city_target_id"]');const $locationSelect=$(exposedForm).find('select[name="field_property_location_target_id"]');if($citySelect.length>0&&$locationSelect.length>0){$citySelect.prop('disabled',true).addClass('disabled-select');$locationSelect.prop('disabled',true).addClass('disabled-select');}}}function resetExpFilter(pType='All',showResult=false){const url=window.location.pathname;let cityId='All';let locationId='All';if(drupalSettings.sobha_event?.pageName)if(drupalSettings.sobha_event.pageName==="umm al quwain property list page")if(url==='/ar/properties-for-sale-in-umm-al-quwain'||url==='/properties-for-sale-in-umm-al-quwain'){cityId=269;locationId=276;}updateExposeFilter(pType,'All','All',cityId,locationId,showResult);}$('body').on('change','#edit-field-property-type-target-id, #edit-field-number-of-bedrooms-target-id, #edit-field-price-range-target-id, #edit-field-city-target-id, #edit-field-property-location-target-id',function(){var sourceElement=$(this).attr('id');var prpListTypeId=$('#edit-field-property-type-target-id').val();if(prpListTypeId=='')prpListTypeId='All';var prpBedroomId=$('#edit-field-number-of-bedrooms-target-id').val();var prpPriceRangeId=$('#edit-field-price-range-target-id').val();var prpCityId=$('#edit-field-city-target-id').val();var prpLocationId=$('#edit-field-property-location-target-id').val();if(prpBedroomId!='All'||prpPriceRangeId!='All'){propertyUnitSortEnabled=true;var unitSortValue=jQuery('.filter-main select option:selected').data('unit-value');if(unitSortValue!='random_seed_ASC')$('form.views-exposed-form .prop-listing-hidden-sort select[name="sort_bef_combine"]').val(unitSortValue).trigger('change');}else{if(prpBedroomId=='All'&&prpPriceRangeId=='All'){propertyUnitSortEnabled=false;var propertySortValue=jQuery('.filter-main select option:selected').data('value');if(propertySortValue!='random_seed_ASC')$('form.views-exposed-form .prop-listing-hidden-sort select[name="sort_bef_combine"]').val(propertySortValue).trigger('change');}}updateExposeFilter(prpListTypeId,prpBedroomId,prpPriceRangeId,prpCityId,prpLocationId,false,sourceElement);});if($('.prpListTypeId').length>0){var prpListTypeId=$('.prpListTypeId').val();$('#edit-field-property-type-target-id').attr('disabled','disabled');updateExposeFilter(prpListTypeId,'All','All','All','All');}else{if($('.prpSubTypeTermId').length>0)resetExpFilter();}$('body').on('click','.map-loc-link',function(event){event.preventDefault();var locId=$(this).attr('data-loc');var currentPath=$(location).attr("pathname");var showResult=false;$('.exp-reset').trigger('click');setTimeout(function(){$('#edit-field-property-location-target-id').val(locId);$('#edit-field-property-type-target-id').val('');$('#edit-field-property-location-target-id').trigger('change');if($('.views-exposed-form #edit-submit-properties-mapping').length>0)$('.views-exposed-form #edit-submit-properties-mapping').trigger('click');else $('.views-exposed-form #edit-submit-properties-in-dubai').trigger('click');},1500);});$('body').on('click','.blinking-marker',function(event){if($(this).closest('.map-digital-walkthrough').length>0)return;var locId=$(this).attr('data-loc');var showResult=false;if($('.prpListTypeId').length>0){var prpListTypeId=$('.prpListTypeId').val();$('#edit-field-property-type-target-id').attr('disabled','disabled');resetExpFilter(prpListTypeId,false);}else resetExpFilter('All',false);setTimeout(function(){$('#edit-field-property-location-target-id').val(locId);$('#edit-field-property-type-target-id').val('');$('#edit-field-property-location-target-id').trigger('change');if($('.views-exposed-form #edit-submit-properties-mapping').length>0)$('.views-exposed-form #edit-submit-properties-mapping').trigger('click');else $('.views-exposed-form #edit-submit-properties-in-dubai').trigger('click');$('body').css('overflow','auto');$('.mobile-map-wrapper').removeClass('map-open');},1500);});$('body').on('click','.open-footer-form',function(event){$('#footer-common-form .planning-box-main #form-main-click').trigger('click');});function refreshCustomCheckBoxes(updatedElmnt){if(updatedElmnt!='edit-field-property-type-target-id'&&$('input.prpListTypeId').length==0){refreshPropExpFilter();setTimeout(function(){if($('#edit-field-property-type-target-id option:selected').length>0)$('#edit-field-property-type-target-id option:selected').each(function(){var selctedVal=$(this).val();$(this).removeAttr("selected");$('.custom-chkbox-wrapper .tmp_chk[value="'+selctedVal+'"]').prop("checked",true);$('.custom-chkbox-wrapper .tmp_chk[value="'+selctedVal+'"]').trigger('change');});},300);}setTimeout(function(){$('.desktop-filter-section').removeClass('has-overlay');$('.desktop-filter-section .overlay-loader').remove();},1000);}function updateExposeFilter(prpListTypeId,prpBedroomId,prpPriceRangeId,prpCityId,prpLocationId,showResult=false,updatedElmnt=''){var prpListLang=$('.prpListLang').val();$('#edit-field-property-type-target-id').val(prpListTypeId);var prpSubTypeTermId=$('input.prpSubTypeTermId').val();if($('input.prpListTypeId').length>0)prpListTypeId=$('input.prpListTypeId').val();$('.desktop-filter-section').removeClass('has-overlay');$('.desktop-filter-section .overlay-loader').remove();if(updatedElmnt!=''){$('.desktop-filter-section').addClass('has-overlay');$('.desktop-filter-section').prepend("<div class='overlay-loader'><img class='filter-loader' src='/themes/sobha_uplift/images/filter-loader.svg' alt='Loader' /></div>");if(updatedElmnt=='edit-field-property-type-target-id')$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+'All'+'/'+prpPriceRangeId+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-number-of-bedrooms-target-id',function(data){$('#edit-field-number-of-bedrooms-target-id').html(data.bedrooms);$('#edit-field-number-of-bedrooms-target-id').val(prpBedroomId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+'All'+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-price-range-target-id',function(data){$('#edit-field-price-range-target-id').html(data.price_range);$('#edit-field-price-range-target-id').val(prpPriceRangeId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+'All'+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-city-target-id',function(data){$('#edit-field-city-target-id').html(data.cities);$('#edit-field-city-target-id').val(prpCityId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+prpCityId+'/'+'All'+'/'+prpSubTypeTermId+'/'+'edit-field-property-location-target-id',function(data){$('#edit-field-property-location-target-id').html(data.locations);$('#edit-field-property-location-target-id').val(prpLocationId);refreshCustomCheckBoxes(updatedElmnt);},"json");},"json");},"json");},"json");else if(updatedElmnt=='edit-field-number-of-bedrooms-target-id')$.post(prpListLang+"/get-property-expose-single-option/"+'All'+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-property-type-target-id',function(data){$('#edit-field-property-type-target-id').html(data.prop_types);$.each(prpListTypeId.toString().split(","),function(i,e){$("#edit-field-property-type-target-id option[value='"+e+"']").prop("selected",true).change();});$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+'All'+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-price-range-target-id',function(data){$('#edit-field-price-range-target-id').html(data.price_range);$('#edit-field-price-range-target-id').val(prpPriceRangeId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+'All'+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-city-target-id',function(data){$('#edit-field-city-target-id').html(data.cities);$('#edit-field-city-target-id').val(prpCityId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+prpCityId+'/'+'All'+'/'+prpSubTypeTermId+'/'+'edit-field-property-location-target-id',function(data){$('#edit-field-property-location-target-id').html(data.locations);$('#edit-field-property-location-target-id').val(prpLocationId);refreshCustomCheckBoxes(updatedElmnt);},"json");},"json");},"json");},"json");else if(updatedElmnt=='edit-field-price-range-target-id')$.post(prpListLang+"/get-property-expose-single-option/"+'All'+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-property-type-target-id',function(data){$('#edit-field-property-type-target-id').html(data.prop_types);$('#edit-field-property-type-target-id').val(prpListTypeId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+'All'+'/'+prpPriceRangeId+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-number-of-bedrooms-target-id',function(data){$('#edit-field-number-of-bedrooms-target-id').html(data.bedrooms);$('#edit-field-number-of-bedrooms-target-id').val(prpBedroomId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+'All'+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-city-target-id',function(data){$('#edit-field-city-target-id').html(data.cities);$('#edit-field-city-target-id').val(prpCityId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+prpCityId+'/'+'All'+'/'+prpSubTypeTermId+'/'+'edit-field-property-location-target-id',function(data){$('#edit-field-property-location-target-id').html(data.locations);$('#edit-field-property-location-target-id').val(prpLocationId);refreshCustomCheckBoxes(updatedElmnt);},"json");},"json");},"json");},"json");else if(updatedElmnt=='edit-field-city-target-id')$.post(prpListLang+"/get-property-expose-single-option/"+'All'+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-property-type-target-id',function(data){$('#edit-field-property-type-target-id').html(data.prop_types);$('#edit-field-property-type-target-id').val(prpListTypeId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+'All'+'/'+prpPriceRangeId+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-number-of-bedrooms-target-id',function(data){$('#edit-field-number-of-bedrooms-target-id').html(data.bedrooms);$('#edit-field-number-of-bedrooms-target-id').val(prpBedroomId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+'All'+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-price-range-target-id',function(data){$('#edit-field-price-range-target-id').html(data.price_range);$('#edit-field-price-range-target-id').val(prpPriceRangeId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+prpCityId+'/'+'All'+'/'+prpSubTypeTermId+'/'+'edit-field-property-location-target-id',function(data){$('#edit-field-property-location-target-id').html(data.locations);$('#edit-field-property-location-target-id').val(prpLocationId);refreshCustomCheckBoxes(updatedElmnt);},"json");},"json");},"json");},"json");else{if(updatedElmnt=='edit-field-property-location-target-id')$.post(prpListLang+"/get-property-expose-single-option/"+'All'+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-property-type-target-id',function(data){$('#edit-field-property-type-target-id').html(data.prop_types);$('#edit-field-property-type-target-id').val(prpListTypeId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+'All'+'/'+prpPriceRangeId+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-number-of-bedrooms-target-id',function(data){$('#edit-field-number-of-bedrooms-target-id').html(data.bedrooms);$('#edit-field-number-of-bedrooms-target-id').val(prpBedroomId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+'All'+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-price-range-target-id',function(data){$('#edit-field-price-range-target-id').html(data.price_range);$('#edit-field-price-range-target-id').val(prpPriceRangeId);$.post(prpListLang+"/get-property-expose-single-option/"+prpListTypeId+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+'All'+'/'+prpLocationId+'/'+prpSubTypeTermId+'/'+'edit-field-city-target-id',function(data){$('#edit-field-city-target-id').html(data.cities);$('#edit-field-city-target-id').val(prpCityId);refreshCustomCheckBoxes(updatedElmnt);},"json");},"json");},"json");},"json");}}else $.post(prpListLang+"/get-property-expose-options/"+prpListTypeId+'/'+prpBedroomId+'/'+prpPriceRangeId+'/'+prpCityId+'/'+prpLocationId+'/'+prpSubTypeTermId,function(data){$('#edit-field-property-type-target-id').html(data.prop_types);$('#edit-field-property-type-target-id').val(prpListTypeId);$('#edit-field-number-of-bedrooms-target-id').html(data.bedrooms);$('#edit-field-number-of-bedrooms-target-id').val(prpBedroomId);$('#edit-field-price-range-target-id').html(data.price_range);$('#edit-field-price-range-target-id').val(prpPriceRangeId);$('#edit-field-city-target-id').html(data.cities);$('#edit-field-city-target-id').val(prpCityId);$('#edit-field-property-location-target-id').html(data.locations);$('#edit-field-property-location-target-id').val(prpLocationId);if(showResult)if($('.views-exposed-form #edit-submit-properties-in-dubai').length>0)$('.views-exposed-form #edit-submit-properties-in-dubai').trigger('click');else $('.views-exposed-form #edit-submit-properties-mapping').trigger('click');},"json");}$('.left_icon').each(function(){var icon=$(this).html();var target=$(this).attr('data-target');$(target).html(icon);});$('.page-taxonomy-property-sub-type .views-row').remove();$('body').on('click','.team-box .read-more',function(){var imageURL=$(this).closest('.team-box').find('.team-box-thumb img').attr('src');var linkedInURL='';if($(this).closest('.team-box').find('.linkedin-link').length>0)linkedInURL=$(this).closest('.team-box').find('.linkedin-link').attr('href');var descr=$(this).closest('.team-box').find('.full-content').html();var name=$(this).closest('.team-box').find('.team-box-content h4').text();var designation=$(this).closest('.team-box').find('.team-box-content .designation').text();$('#teamModal .meet-pop-thumb').html('<img class="img-100 radius" src="'+imageURL+'" alt="'+$.trim(name)+'">');$('#teamModal .meet-pop-content h4').html(name);$('#teamModal .meet-pop-content span.designation').html(designation);$('#teamModal .meet-pop-content .meet-pop-disc').html(descr);if(linkedInURL!=''){$('#teamModal .meet-pop-content .lkn-link').attr('href',linkedInURL);$('#teamModal .meet-pop-content .lkn-link').show();}else $('#teamModal .meet-pop-content .lkn-link').hide();$('#teamModal').modal('show');});$("body").on("click",".investor-block .download-button.showpopup",function(){var dURL=$(this).attr('data-url');var dFile=$(this).attr('data-filename');var reportTitle=$(this).attr('data-title');var reportYear=$(this).attr('data-year');$('#report_data').data("title",reportTitle);$('#report_data').data("year",reportYear);$('.form-item-download-path input').val(dURL);$('.report_d_link').attr('href',dURL);$('.report_d_link').text(dFile);$('#downloadModal').modal('show');});$('body').on('click','.mobile-button-div a:first',function(e){e.preventDefault();$(".desktop-filter-section").addClass("mobile filter-open");$('body').css('overflow','hidden');});$('body').on('click','.mobile-button-div a:last',function(e){e.preventDefault();$(".mobile-map-wrapper").addClass("map-open");$('body').css('overflow','hidden');});$('body').on('click','.desktop-filter-section a.filter-close-button',function(e){e.preventDefault();$(".desktop-filter-section").removeClass("filter-open");$(".desktop-filter-section").removeClass("mobile");$('body').css('overflow','auto');});$('body').on('click','.mobile-map-wrapper a.map-close-button',function(e){e.preventDefault();$(".mobile-map-wrapper").removeClass("map-open");$('body').css('overflow','auto');});$('body').on('click','.notification-icon',function(){$(".webform-submission-email-subscription-form label.error").remove();});var chkSubscriptionWrapper=$('.webform-submission-email-subscription-form .sub-div div.button-1').length;if(chkSubscriptionWrapper==0)$(".webform-submission-email-subscription-form .sub-div .webform-button--submit").wrap("<div class='button-1 submit-bttn-main'></div>");$('.page-taxonomy-property-sub-type .planning-section').next('.views-row').remove();if($('.page-node-type-about-us .company-counts').length>0){var counted=0;$(window).scroll(function(){var oTop=$('.counter').offset().top-window.innerHeight;if(counted==0&&$(window).scrollTop()>oTop){$('.count').each(function(){var $this=$(this),countTo=$this.attr('data-count');$({countNum:$this.text()}).animate({countNum:countTo},{duration:2000,easing:'swing',step:function(){$this.text(Math.floor(this.countNum));},complete:function(){$this.text(this.countNum);}});});counted=1;}});}(function($,Drupal){Drupal.behaviors.customPopupClose={attach:function(context,settings){$(once('.custom-close-btn',context)).each(function(){$(this).on('click',function(){console.log("clicked close button");$('.custom-popup-overlay').remove();});});}};})(jQuery,Drupal);$('body').on('change','.tmp_chk',function(){var chkVal=$(this).val();if($(this).hasClass('all_chk'))if($(this).is(":checked")){$(this).closest('.form-type-select').find('select option').prop('selected',true);$(this).closest('.form-type-select').find('select option.select-all-chk').prop('selected',false);$(this).closest('.items-wrapper').find('input.tmp_chk').prop('checked',true);}else{$(this).closest('.form-type-select').find('select option').prop('selected',false);$(this).closest('.items-wrapper').find('input.tmp_chk').prop('checked',false);}else if($(this).is(":checked"))$(this).closest('.form-type-select').find('select option[value="'+chkVal+'"]').prop('selected',true);else $(this).closest('.form-type-select').find('select option[value="'+chkVal+'"]').prop('selected',false);$(this).closest('.form-type-select').find('select').trigger("change");var defaultLabel=$(this).closest('.custom-chkbox-wrapper').attr('data-default-label');var selectedCount=$(this).closest('.form-type-select').find("select option:selected").length;console.log(selectedCount);if(selectedCount==0)$(this).closest('.custom-chkbox-wrapper').find('.default-label').text(defaultLabel);else if(selectedCount==1){var chkboxLbl=$(this).closest('.items-wrapper').find('.tmp_chk:checked:last').attr('data-chkbox-lbl');$(this).closest('.custom-chkbox-wrapper').find('.default-label').text(chkboxLbl);}else $(this).closest('.custom-chkbox-wrapper').find('.default-label').text(selectedCount+' '+Drupal.t('Selected'));var slctdOptionCnt=selectedCount+1;var allOptionCnt=$(this).closest('.form-type-select').find("select option").length;if(slctdOptionCnt==allOptionCnt)$(this).closest('.items-wrapper').find('.all_chk').prop('checked',true);else $(this).closest('.items-wrapper').find('.all_chk').prop('checked',false);});$('body').on('click','.options-collapsed',function(){if($('input.prpListTypeId').length==0){$('.custom-chkbox-wrapper .default-label').removeClass('options-expanded').addClass('options-collapsed');$('.custom-chkbox-wrapper .items-wrapper').removeClass('items-expanded').addClass('items-collapsed');$(this).removeClass('options-collapsed').addClass('options-expanded');$(this).siblings('.items-wrapper').removeClass('items-collapsed').addClass('items-expanded');}});$('body').on('click','.options-expanded',function(){$(this).removeClass('options-expanded').addClass('options-collapsed');$(this).siblings('.items-wrapper').removeClass('items-expanded').addClass('items-collapsed');});$('body').on('click','.chk-lbl',function(){$(this).siblings('input.tmp_chk').trigger('click');});$(document).on('click',function(event){if(!$(event.target).closest('.items-wrapper, .default-label').length){$('.default-label').removeClass('options-expanded').addClass('options-collapsed');$('.items-wrapper').removeClass('items-expanded').addClass('items-collapsed');}});$('.items-wrapper, .default-label').on('click',function(event){event.stopPropagation();});function refreshPropExpFilter(){$('.custom-chkbox-wrapper').remove();if($('#views-exposed-form-properties-in-dubai-block-1').length>0||$('#views-exposed-form-properties-in-dubai-block-6').length>0||$('#views-exposed-form-properties-mapping-block-1').length>0||$('#views-exposed-form-properties-mapping-block-6').length>0){$('#views-exposed-form-properties-in-dubai-block-1, #views-exposed-form-properties-in-dubai-block-6, #views-exposed-form-properties-mapping-block-1, #views-exposed-form-properties-mapping-block-6').find('select#edit-field-property-type-target-id').each(function(){$(this).hide();var slct=$(this);var slctName=$(this).attr('name');var labelVal=$(this).siblings('label').text();var labelVal=Drupal.t('All');var itms='';var slctedCtr=0;var firstSlctedLbl='';var optionCnt=$(slct).find('option').length;var optionSlctedCnt=$(slct).find('option:selected').length;optionSlctedCnt=optionSlctedCnt+1;$(slct).find('option').each(function(){var optionVal=$(this).attr('value');var optionLbl=$(this).text();var chkSelected=$(this).prop('selected');var checkedVal='';if(typeof chkSelected!=='undefined'&&chkSelected!==false){checkedVal='checked="checked"';slctedCtr++;firstSlctedLbl=optionLbl;}if($(this).hasClass('select-all-chk'))var extraClass="all_chk ";else var extraClass="";itms=itms+'<div class="slct-each-itm"><input type="checkbox" '+checkedVal+' class="'+extraClass+'tmp_chk" name="tmp_chk" data-chkbox-lbl="'+optionLbl+'" value="'+optionVal+'"><span class="chk-lbl">'+optionLbl+'</span></div>';});if(slctedCtr==0)var tLbl=labelVal;else if(slctedCtr==1)var tLbl=firstSlctedLbl;else var tLbl=slctedCtr+' '+Drupal.t('Selected');var typeClass='';if($('input.prpListTypeId').length>0)typeClass=' disabled-select';itms='<div class="custom-chkbox-wrapper" data-default-label="'+labelVal+'"><div class="default-label options-collapsed '+typeClass+'">'+tLbl+'</div><div class="items-wrapper items-collapsed">'+itms+'</div></div>';$(slct).after(itms);if(optionCnt==optionSlctedCnt)$(slct).siblings('.custom-chkbox-wrapper').find('.tmp_chk').prop('checked',true);});if($('.prpListTypeId').length>0){$('#edit-field-property-type-target-id').siblings('.custom-chkbox-wrapper').find('.tmp_chk').prop('checked',true);$('#edit-field-property-type-target-id').siblings('.custom-chkbox-wrapper').find('.tmp_chk').prop('disabled',true);}}}Drupal.behaviors.preventHashScroll={attach:function(context){if(once('prevent-hash-scroll','html',context).length){const appointmentPage=localStorage.getItem("appointment_page_redirect");if(window.location.hash&&appointmentPage==="true"){window.scrollTo(0,0);history.replaceState(null,null,window.location.pathname+window.location.search);}}}};if($('.reshedule-search').length>0){function isPhone(phone){var regex=/^[0-9]{7,15}$/;return regex.test(phone);}function isEmail(email){var regex=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;return regex.test(email);}$("input.sch-search-btn").on("click",function(e){$('label.error').remove();$('.api-success').remove();$('.api-error').remove();var email=$('.email').val();var phone=$('.phone').val();var hasError=false;if(email==''){$('.email').after('<label class="error">'+Drupal.t('Please enter your email address.')+'</label>');hasError=true;}else{if(!isEmail(email)){$('.email').after('<label class="error">'+Drupal.t('Please enter a valid email address.')+'</label>');hasError=true;}}if(phone==''){$('.phone').after('<label class="error">'+Drupal.t('Please enter your phone number.')+'</label>');hasError=true;}else{if(!isPhone(phone)){$('.phone').after('<label class="error">'+Drupal.t('Your phone number must contain between 7 and 15 digits.')+'</label>');hasError=true;}}if(!hasError){var btnVal=$("input.sch-search-btn").val();$("input.sch-search-btn").val(Drupal.t('Searching...'));$("input.sch-search-btn").attr('disabled',true);$.post("/search-nice-schedule/"+email+"/"+phone,function(data){if(data.success)window.location.href=data.message;else $('.sch-search').after('<div class="api-error">'+data.message+'<div>');$("input.sch-search-btn").val(btnVal);$("input.sch-search-btn").attr('disabled',false);},"json");}});$(".email").on("input",function(e){$(this).next('label.error').remove();var email=$(this).val();if(email=='')$('.email').after('<label class="error">'+Drupal.t('Please enter your email address.')+'</label>');else{if(!isEmail(email))$('.email').after('<label class="error">'+Drupal.t('Please enter a valid email address.')+'</label>');}});$(".phone").on("input",function(e){$(this).next('label.error').remove();var phone=$(this).val();if(phone=='')$('.phone').after('<label class="error">'+Drupal.t('Please enter your phone number.')+'</label>');else{if(!isPhone(phone))$('.phone').after('<label class="error">'+Drupal.t('Your phone number must contain between 7 and 15 digits.')+'</label>');}});}if($('.schedule-cancel-reschedule').length>0){function openTab(hash){$(".tab-content").removeClass("tab-active");$(".tabs a").removeClass("active");if($(hash).length){$(hash).addClass("tab-active");$('.tabs a[href="'+hash+'"]').addClass("active");}}if(getParameterByName('id')!=null){var video_id=getParameterByName('id');$.get("/check-schedule-status/"+video_id,function(data){if(data.success){$('.wait-sec').remove();$('.resch-main .video_id').val(video_id);$('.schedule-cancel-reschedule span.sch_date_time').html(data.customMsg);$('.schedule-cancel-reschedule').show();}else{console.log(data.message);$('.wait-sec .container').html('<h3 class="text-center">'+Drupal.t('Oops! Something went wrong.')+'</h3>');$('.schedule-cancel-reschedule').remove();}},"json");}$(".tabs a").on("click",function(e){e.preventDefault();let hash=$(this).attr("href");openTab(hash);history.pushState(null,null,hash);});if(window.location.hash)openTab(window.location.hash);else $(".tabs a:first").trigger("click");$("input.sch-cancel-btn").on("click",function(e){$('label.error').remove();$('.api-success').remove();$('.api-error').remove();var video_id=$('.video_id').val();var hasError=false;if(video_id==''){$('.canc-main').after('<div class="api-error">'+Drupal.t('Invalid request.')+'<div>');hasError=true;}if(!hasError){var btnVal=$("input.sch-cancel-btn").val();var slots='empty';$("input.sch-cancel-btn").val(Drupal.t('Cancelling...'));$("input.sch-cancel-btn").attr('disabled',true);$.post("/reschedule-nice-slots/cancel/"+video_id+"/"+slots,function(data){if(data.success){$('.schedule-cancel-reschedule .container').html('<div class="api-success">'+data.message+'<div>');if(gtm_enabled==true&&window.dataLayer){let appointmentRedirectEvent=JSON.parse(localStorage.getItem("appointment_redirect_event"));if(appointmentRedirectEvent){appointmentRedirectEvent.custom_event_name='appointment_modification';appointmentRedirectEvent.cta_name='cancel appointment';window.dataLayer.push(appointmentRedirectEvent);console.log('Appointment Page modification event triggered: ',appointmentRedirectEvent);localStorage.removeItem("appointment_redirect_event");}}}else $('.canc-main').after('<div class="api-error">'+data.message+'<div>');$("input.sch-cancel-btn").val(btnVal);$("input.sch-cancel-btn").attr('disabled',false);},"json");}});$("input.resch-btn").on("click",function(e){$('label.error').remove();$('.api-success').remove();$('.api-error').remove();var date=$('.sch_date').val();var slots=$('.time_slot').val();var video_id=$('.video_id').val();var hasError=false;if(date==''){$('.sch_date').after('<label class="error">'+Drupal.t('Please select a date.')+'</label>');hasError=true;}if(slots==''){$('.time_slot').after('<label class="error">'+Drupal.t('Please select a slot.')+'</label>');hasError=true;}if(video_id==''){$('.sch_date').after('<label class="error">'+Drupal.t('Invalid request.')+'</label>');hasError=true;}if(!hasError){var btnVal=$("input.resch-btn").val();$("input.resch-btn").val(Drupal.t('Rescheduling...'));$("input.resch-btn").attr('disabled',true);$.post("/reschedule-nice-slots/reschedule/"+video_id+"/"+slots,function(data){if(data.success){$('.schedule-cancel-reschedule .container').html('<div class="api-success">'+data.message+'<div>');$('.sch_date').val('');$('.time_slot option').not(':first').remove();if(gtm_enabled==true&&window.dataLayer){let appointmentRedirectEvent=JSON.parse(localStorage.getItem("appointment_redirect_event"));if(appointmentRedirectEvent){appointmentRedirectEvent.custom_event_name='appointment_modification';appointmentRedirectEvent.cta_name='reschedule';window.dataLayer.push(appointmentRedirectEvent);console.log('Appointment Page modification event triggered: ',appointmentRedirectEvent);localStorage.removeItem("appointment_redirect_event");}}}else $('.resch-main').after('<div class="api-error">'+data.message+'<div>');$("input.resch-btn").val(btnVal);$("input.resch-btn").attr('disabled',false);},"json");}});$(".resch-frm .sch_date").on("change",function(e){$(this).next('label.error').remove();if($(this).val()=='')$(this).after('<label class="error">'+Drupal.t('Please select a date.')+'</label>');});$(".resch-frm .time_slot").on("change",function(e){$(this).next('label.error').remove();if($(this).val()=='')$(this).after('<label class="error">'+Drupal.t('Please select a slot.')+'</label>');});}if($('.video-call-sec').length>0)if(getParameterByName('video_call_id')!=null){var video_id=getParameterByName('video_call_id');var leadId=getParameterByName('leadId');var siteLang=$('html').attr('lang');if(siteLang=='en')siteLang='';else siteLang='/'+siteLang;$.get("/check-video-time/"+video_id,function(data){if(data.success&&data.status=='valid')window.location.href=siteLang+'/launch-the-call?agent='+data.agent_id+'&video_call_id='+video_id+'&leadId='+leadId;else if(data.status=='failed'){console.log(data.message);$('.video-call-sec').removeClass('wait-sec').addClass('scheduled-sec');$('.video-call-sec .container').html('<div class="shed-img-wrap"><img src="/themes/sobha_uplift/images/sh1.svg" class="" alt="Icon"></div><h3 class="text-center">'+Drupal.t('It looks youre a bit early for the scheduled call.')+'</h3><p class="text-center">'+data.customMsg+'</p><div class="btn-group-sec two"><a href="'+siteLang+'/launch-the-call?agent='+data.agent_id+'&video_call_id='+video_id+'&leadId='+leadId+'" class="button-1 ">'+Drupal.t('Join Anyway')+'<i></i></a></div>');}else if(data.status=='expired'){console.log(data.message);$('.video-call-sec').removeClass('wait-sec').addClass('scheduled-sec');$('.video-call-sec .container').html('<h3 class="text-center">'+Drupal.t('Oops! Your appointment has expired.')+'</h3>');}else{console.log(data.message);$('.video-call-sec').removeClass('wait-sec').addClass('scheduled-sec');$('.video-call-sec .container').html('<h3 class="text-center">'+Drupal.t('Oops! Something went wrong.')+'</h3>');}},"json");}else{$('.video-call-sec').removeClass('wait-sec').addClass('scheduled-sec');$('.video-call-sec .container').html('<h3 class="text-center">'+Drupal.t('Oops! Something went wrong.')+'</h3>');}if($('.pagecontainer #start-button').length>0)if(getParameterByName('video_call_id')!=null&&getParameterByName('agent')!=null){var video_id=getParameterByName('video_call_id');var siteLang=$('html').attr('lang');if(siteLang=='en')siteLang='';else siteLang='/'+siteLang;$.get("/check-video-time/"+video_id,function(data){$('.pagecontainer .shed-img-wrap.preloader').remove();if(data.success&&data.status=='valid')$('.pagecontainer #start-button').show();else if(data.status=='failed'){console.log(data.message);$('.pagecontainer #start-button').show();}else if(data.status=='expired'){console.log(data.message);$('.pagecontainer #start-button .btn-group-sec').remove();$('.pagecontainer #start-button .pageTitle').html(Drupal.t('Oops! Your appointment has expired.'));$('.pagecontainer #start-button').addClass('req-invalid');$('.pagecontainer #start-button').show();}else{console.log(data.message);$('.pagecontainer #start-button .btn-group-sec').remove();$('.pagecontainer #start-button .pageTitle').html(Drupal.t('Oops! Something went wrong.'));$('.pagecontainer #start-button').addClass('req-invalid');$('.pagecontainer #start-button').show();}},"json");}else{$('.pagecontainer .shed-img-wrap.preloader').remove();$('.pagecontainer #start-button .btn-group-sec').remove();$('.pagecontainer #start-button .pageTitle').html(Drupal.t('Oops! Something went wrong.'));$('.pagecontainer #start-button').addClass('req-invalid');$('.pagecontainer #start-button').show();}function getParameterByName(name){name=name.replace(/[\[\]]/g,"\\$&");const url=window.location.href;const regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)");const results=regex.exec(url);if(!results)return null;if(!results[2])return '';return decodeURIComponent(results[2].replace(/\+/g," "));}if(getParameterByName('hide_cta')!=null&&getParameterByName('hide_cta')=='1')$('#enq-form').addClass('hide_cta_btns');Drupal.behaviors.mySobhaStuff={attach:function(context,settings){$(document).ajaxComplete(function(event,xhr,settings){var ctr=1;if(xhr.responseJSON&&Array.isArray(xhr.responseJSON))xhr.responseJSON.forEach(function(command){if(command.command==='insert'&&command.data){var temp=$('<div>').html(command.data);var schDate=temp.find('input[name="scheduled_date"]').val();var schSlot=temp.find('input[name="scheduled_slot"]').val();var pref_mode=temp.find('input[name="preferred_mode_of_contact"]:checked').val();if(ctr==1&&schDate!==undefined&&schSlot!==undefined&&pref_mode!==undefined&&pref_mode=='video call'){$('.slot-selection-row').show();$('select.sch_date').val(schDate).trigger("change");setTimeout(function(){$('select.time_slot').val(schSlot).trigger("change");$('select.time_slot').val(schSlot);},5000);ctr++;}}});});if($('.webform-submission-register-your-interest-prop-detl-form, .schedule-cancel-reschedule').length>0)$.post("/get-nice-dates",function(data){$('select.sch_date').html(data.availableDates);},"json");if($('.webform-submission-register-your-interest-prop-detl-form, .schedule-cancel-reschedule',context).length>0){$('.slot-selection-row').hide();$(document).on('change.mySobhaStuff','input[name="preferred_mode_of_contact"]',function(){$(this).closest('.webform-submission-form').find('input[name="scheduled_date"]').val('');$(this).closest('.webform-submission-form').find('input[name="scheduled_slot"]').val('');$(this).closest('.webform-submission-form').find('.sch_date').val('');$(this).closest('.webform-submission-form').find('.time_slot option').not(':first').remove();if($(this).val()=='video call')$('.slot-selection-row').show();else $('.slot-selection-row').hide();});once('slot-handler','.webform-submission-form .time_slot',context).forEach(function(element){$(document).off('change.mySobhaStuff','.webform-submission-form .time_slot');$(document).on('change.mySobhaStuff','.webform-submission-form .time_slot',function(){var slot=$(this).val();$(this).closest('.webform-submission-form').find('input[name="scheduled_slot"]').val(slot);$(this).closest('.webform-submission-form').find('input[name="scheduled_slot"]').next('label').text('').hide();});});once('sch-date-handler','.webform-submission-form .sch_date',context).forEach(function(element){$(document).off('change.mySobhaStuff','.webform-submission-form .sch_date');$(document).on('change.mySobhaStuff','.webform-submission-form .sch_date',function(){var siteLang=$('html').attr('lang');if(siteLang=='en')siteLang='';else siteLang='/'+siteLang;var scDate=$(this).val();var mode=$(this).closest('.webform-submission-form').find('input[name="preferred_mode_of_contact"]:checked').val();if(mode=='video call'){$(this).closest('.webform-submission-form').find('input[name="scheduled_date"]').val(scDate);$(this).closest('.webform-submission-form').find('input[name="scheduled_date"]').next('label').text('').hide();$(this).closest('.webform-submission-form').find('input[name="scheduled_slot"]').val('');$(this).closest('.webform-submission-form').find('.time_slot option').not(':first').remove();if(scDate!=''){$(this).closest('.webform-submission-form').find('.time_slot option:first').text(Drupal.t('Loading...'));$(this).closest('.webform-submission-form').find('.time_slot').prop('disabled',true);$.post(siteLang+"/get-nice-slots/"+scDate+"/"+mode,function(data){$('.webform-submission-form').find('.time_slot option').not(':first').remove();var slots='<option value="">'+Drupal.t('Select Slot *')+'</option>';if($('.webform-submission-form').find('.time_slot option').length<=2){$.each(data.slots,function(index,item){slots=slots+'<option data-group="'+item.group+'" value="'+item.slotIds+'">'+item.time+'</option>';});$('.webform-submission-form').find('.time_slot').html(slots);}$('.webform-submission-form').find('.time_slot').prop('disabled',false);},"json");}}});});}$('.share-button-icon').on('click',function(event){$(this).closest('.wishlist-share-section').find('.white-social-div').toggleClass('mystyle');});var currentPath=$(location).attr("pathname");if($('#wishlist-container').length>0)currentPath='/wishlist';window.webengage&&window.webengage.onReady(function(){$(".webform-submission-form").each(function(index){$(this).find('input.user_anonymous_id').remove();$(this).prepend("<input type='hidden' class='user_anonymous_id' name='anonymous_id' value='"+webengage.state.getForever().luid+"'>");});function update_wishlist_icon(){var userId=webengage.state.getForever().luid;var siteLang=$('html').attr('lang');if(siteLang=='en')siteLang='';else siteLang='/'+siteLang;$.post(siteLang+"/get-my-wishlist/"+userId,function(data){if(data.length>0)$('.wishlist-icon').addClass('pulse');else $('.wishlist-icon').removeClass('pulse');},"json");}update_wishlist_icon();function update_wishlist_status(rType,pName,pType,pId,pPrice,city,location,deskimage,pImg){if(rType=='add')var eventName='Add_To_Wishlist';else var eventName='Remove_From_Wishlist';var sldr=pImg.split(',');var bnr=deskimage.split(',');webengage.track(eventName,{"project_name":pName??'',"project_type":pType??'',"project_id":pId??'',"city":city??'',"location":location??'',"price_range":pPrice??'',"img_slider":sldr,"img_banner":bnr});}function load_wishlist_view(){var $wishlistContainer=$('#wishlist-container',context);if($wishlistContainer.length){var userId=webengage.state.getForever().luid;var siteLang=$('html').attr('lang');if(siteLang=='en')siteLang='';else siteLang='/'+siteLang;$.post(siteLang+"/get-my-wishlist/"+userId,function(data){if(data.length>0){$('.wishlist-icon').addClass('pulse');if(data.length>1)$('.remove-show-wrapper .wishlist_item_count').text(data.length+' '+Drupal.t('ITEMS'));else $('.remove-show-wrapper .wishlist_item_count').text(data.length+' '+Drupal.t('ITEM'));}else{$('.wishlist-icon').removeClass('pulse');$('.remove-show-wrapper').hide();}propIds=data.join(",");$wishlistContainer.attr('data-user-ids',propIds);$.ajax({url:Drupal.url('views/ajax'),type:'POST',data:{view_name:'my_wishlist',view_display_id:'block_1',view_args:propIds},success:function(response){response.forEach(function(item){if(item.command==='insert'&&item.selector)if(item.data!=''){if(data.length>0)$('.remove-show-wrapper').show();$wishlistContainer.html(item.data);Drupal.attachBehaviors($wishlistContainer[0]);}});}});},"json");}}if(currentPath=='/wishlist/'||currentPath=='/wishlist')load_wishlist_view();if($('body').hasClass('page-node-type-property-landing-page')||$('body').hasClass('page-taxonomy-property-sub-type')||$('body').hasClass('page-node-type-properties-in-dubai')){var userId=webengage.state.getForever().luid;var siteLang=$('html').attr('lang');if(siteLang=='en')siteLang='';else siteLang='/'+siteLang;$.post(siteLang+"/get-my-wishlist/"+userId,function(data){if(data.length>0)$("a.wishlist-main-wrapper").each(function(index){if($.inArray($(this).attr('data-pid'),data)!=-1)$(this).addClass('wish-active');});},"json");}$('body').on('click','.wishlist-main-wrapper:not(.wish-active)',function(event){if($(this).hasClass('wish-processing')==false){$(this).addClass('wish-processing');var clicked=$(this);var pId=$(this).attr('data-pid');var pName=$(this).attr('data-pname');var pType=$(this).attr('data-ptype');var pPrice=$(this).attr('data-prange');var city=$(this).attr('data-city');var location=$(this).attr('data-location');var deskimage=$(this).attr('data-deskbanner');var pImg=$(this).attr('data-pimage');var userId=webengage.state.getForever().luid;var siteLang=$('html').attr('lang');if(siteLang=='en')siteLang='';else siteLang='/'+siteLang;$.post(siteLang+"/add-to-wishlist/"+userId+'/'+pId+'/'+pName,function(data){if(data.status=='success'){clicked.addClass('wish-active');update_wishlist_status('add',pName,pType,pId,pPrice,city,location,deskimage,pImg);update_wishlist_icon();}else console.log(data.message);clicked.removeClass('wish-processing');},"json");}});$('body').on('click','.wishlist-main-wrapper.wish-active',function(event){if($(this).hasClass('wish-processing')==false){$(this).addClass('wish-processing');var clicked=$(this);var pId=$(this).attr('data-pid');var pName=$(this).attr('data-pname');var pType=$(this).attr('data-ptype');var pPrice=$(this).attr('data-prange');var city=$(this).attr('data-city');var location=$(this).attr('data-location');var deskimage=$(this).attr('data-deskbanner');var pImg=$(this).attr('data-pimage');var userId=webengage.state.getForever().luid;var siteLang=$('html').attr('lang');if(siteLang=='en')siteLang='';else siteLang='/'+siteLang;$.post(siteLang+"/remove-from-wishlist/"+userId+'/'+pId,function(data){if(data.status=='success'){clicked.removeClass('wish-active');update_wishlist_status('remove',pName,pType,pId,pPrice,city,location,deskimage,pImg);update_wishlist_icon();}else console.log(data.message);clicked.removeClass('wish-processing');},"json");}});$('body').on('click','.wishlist-remove',function(event){if($(this).hasClass('wish-processing')==false){$(this).addClass('wish-processing');var clicked=$(this);var pId=$(this).attr('data-pid');var pName=$(this).attr('data-pname');var pType=$(this).attr('data-ptype');var pPrice=$(this).attr('data-prange');var city=$(this).attr('data-city');var location=$(this).attr('data-location');var deskimage=$(this).attr('data-deskbanner');var pImg=$(this).attr('data-pimage');var userId=webengage.state.getForever().luid;var siteLang=$('html').attr('lang');if(siteLang=='en')siteLang='';else siteLang='/'+siteLang;$.post(siteLang+"/remove-from-wishlist/"+userId+'/'+pId,function(data){if(data.status=='success'){update_wishlist_status('remove',pName,pType,pId,pPrice,city,location,deskimage,pImg);load_wishlist_view();}else console.log(data.message);clicked.removeClass('wish-processing');},"json");}});$('body').on('click','.clear-all-wishlist',function(event){if($(this).hasClass('wish-processing')==false){$(this).addClass('wish-processing');var clicked=$(this);var userId=webengage.state.getForever().luid;var siteLang=$('html').attr('lang');if(siteLang=='en')siteLang='';else siteLang='/'+siteLang;$.post(siteLang+"/remove-all-wishlist/"+userId,function(data){if(data.status=='success'){$(".wishlist-remove").each(function(){var pId=$(this).attr('data-pid');var pName=$(this).attr('data-pname');var pType=$(this).attr('data-ptype');var pPrice=$(this).attr('data-prange');var city=$(this).attr('data-city');var location=$(this).attr('data-location');var deskimage=$(this).attr('data-deskbanner');var pImg=$(this).attr('data-pimage');update_wishlist_status('remove',pName,pType,pId,pPrice,city,location,deskimage,pImg);});load_wishlist_view();}else console.log(data.message);clicked.removeClass('wish-processing');},"json");}});$('.page-node-type-page #webformSuccessMsg').on('hidden.bs.modal',function(){if(currentPath=='/wishlist/'||currentPath=='/wishlist')resetSEOTypes();});if(currentPath=='/wishlist/'||currentPath=='/wishlist')resetSEOTypes();});$('.page-node-type-communities #webformSuccessMsg').on('hidden.bs.modal',function(){resetCommunityTypes();});if($('body').hasClass('page-node-type-communities'))resetCommunityTypes();$('.page-node-type-seo-landing-page #webformSuccessMsg').on('hidden.bs.modal',function(){resetSEOTypes();});if($('body').hasClass('page-node-type-seo-landing-page'))resetSEOTypes();$('.page-node-type-property-landing-page #webformSuccessMsg, .page-node-type-contact-us #webformSuccessMsg, .investor-relation-listing #webformSuccessMsg, .roadshow-listing #webformSuccessMsg').on('hidden.bs.modal',function(){resetPropTypes();});if($('body').hasClass('page-node-type-property-landing-page')||$('body').hasClass('page-node-type-contact-us')||$('body').hasClass('investor-relation-listing')||$('body').hasClass('roadshow-listing'))resetPropTypes();setTimeout(function(){refreshPropExpFilter();},1000);$(".webform-submission-add-form select").each(function(index){if($(this).val()!='')$(this).addClass('field-selected');else $(this).removeClass('field-selected');});$('body').on('change','.webform-submission-add-form select',function(event){if($(this).val()!='')$(this).addClass('field-selected');else $(this).removeClass('field-selected');});Drupal.Ajax.prototype.setProgressIndicatorFullscreen=function(){this.progress.element=$('<div class="ajax-progress ajax-progress-throbber"><div class="throbber">&nbsp;</div></div>');$('body .ajax-throb').html(this.progress.element);};$('.recaptcha-custom-terms').remove();$(".webform-submission-add-form .form-actions.webform-actions").each(function(index){if(!$(this).closest('form').hasClass('no-captcha-terms'))$(this).after('<div class="recaptcha-custom-terms" style="padding-top: 20px;"><label>'+Drupal.t('This site is protected by reCAPTCHA and the Google <a href="https://policies.google.com/privacy">Privacy Policy</a> and <a href="https://policies.google.com/terms">Terms of Service</a> apply.')+'</label></div>');});if($('.webform-submission-register-your-interest-prop-detl-form').length>0){var contentType=$('.webform-submission-register-your-interest-prop-detl-form #contenType').eq(0).text();if(contentType=='properties_in_dubai'){var nodeId=$('.webform-submission-register-your-interest-prop-detl-form #nodeId').eq(0).text();var nodeTitle=$('.webform-submission-register-your-interest-prop-detl-form #nodeTitle').eq(0).text();var groupProp=$('#group-property-title').text();var nodeEnTitle=$('#node-en-title').text();$('.webform-submission-register-your-interest-prop-detl-form select[name="property_type"]').find('option').not(':first').remove();$('.webform-submission-register-your-interest-prop-detl-form select[name="property_type"]').append($('<option>',{value:nodeId,text:nodeTitle,'data-property':groupProp,'data-translated-text':nodeEnTitle}));$('.webform-submission-register-your-interest-prop-detl-form select[name="property_type"]').val(nodeId);$('.webform-submission-register-your-interest-prop-detl-form input[name="property_name"]').val(nodeTitle);findUnitTypes();}else if(contentType=='group_property_listing'){$('.webform-submission-register-your-interest-prop-detl-form select[name="property_type"]').find('option').not(':first').remove();var firstNode='';var firstTitle='';$(".category-lists-slider .category-button").each(function(index){var nodeId=$(this).find('.nodeId').text();var nodeTitle=$(this).find('.nodeTitle').text();var nodeTitleEn=$(this).find('.nodeTitle').data('translated-text');var nodepropType=$(this).find('.nodepropType').text();var nodeGroupPropTitle=$(this).find('.nodeTitle').data('property');$('.webform-submission-register-your-interest-prop-detl-form select[name="property_type"]').append('<option data-translated-text="'+nodeTitleEn+'" data-property="'+nodeGroupPropTitle+'" data-ptype="'+nodepropType+'" value="'+nodeId+'">'+nodeTitle+'</option>');if(index==0){firstNode=nodeId;firstTitle=nodeTitle;}});if(firstNode!=''){}findUnitTypes();}else if(contentType=='property_landing_page'){$('.webform-submission-register-your-interest-prop-detl-form select[name="property_type"]').find('option').not(':first').remove();var firstNode='';var firstTitle='';var optionList=$('.propertyListDropItems select.tmpPrList').html();$('.webform-submission-register-your-interest-prop-detl-form select[name="property_type"]').append($('<option>',{value:"All",text:Drupal.t("Project")}));$("#propertyListDropItems .views-row").each(function(index){var nodeId=$(this).find('.nodeId').text();var nodeTitle=$(this).find('.nodeTitle').text();$('.webform-submission-register-your-interest-prop-detl-form select[name="property_type"]').append($('<option>',{value:nodeId,text:nodeTitle}));if(index==0){firstNode=nodeId;firstTitle=nodeTitle;}});if(firstNode!='')$('.webform-submission-register-your-interest-prop-detl-form input[name="property_name"]').val(firstTitle);findUnitTypes();}else if(contentType=='contact_us'||contentType=='homepage')$('.webform-submission-register-your-interest-prop-detl-form select[name="unit_type"]').find('option').not(':first').remove();else if($('body').hasClass('page-node-type-communities'))$('.webform-submission-register-your-interest-prop-detl-form').each(function(){$(this).find('select[name="unit_type"] option:not(:first)').remove();});else if($('body').hasClass('page-node-type-seo-landing-page')||$('body').hasClass('roadshow-listing')||$('body').hasClass('investor-relation-listing'))$('.webform-submission-register-your-interest-prop-detl-form select[name="unit_type"]').each(function(){$(this).find('option').not(':first').remove();});else{if(currentPath=='/wishlist/'||currentPath=='/wishlist')$('.webform-submission-register-your-interest-prop-detl-form select[name="unit_type"]').each(function(){$(this).find('option').not(':first').remove();});}}if($('body').hasClass('page-node-type-properties-in-dubai')){$('select[name="property_type"] option:first').remove();$('select[name="property_type"] option[value=""][selected="selected"]').remove();$('select[name="property_type"]').css('pointer-events','none');}$('#views-exposed-form-philanthropy-initiatives-block-1 #edit-field-year-phil-target-id option:first').text(Drupal.t('Filter by Year'));$('body').on('change','#views-exposed-form-philanthropy-initiatives-block-1 #edit-field-year-phil-target-id',function(event){$('#views-exposed-form-philanthropy-initiatives-block-1 #edit-submit-philanthropy-initiatives').trigger('click');});$('#views-exposed-form-philanthropy-initiatives-mobile-block-1 #edit-field-year-phil-mobile-target-id option:first').text(Drupal.t('Filter by Year'));$('body').on('change','#views-exposed-form-philanthropy-initiatives-mobile-block-1 #edit-field-year-phil-mobile-target-id',function(event){$('#views-exposed-form-philanthropy-initiatives-mobile-block-1 #edit-submit-philanthropy-initiatives-mobile').trigger('click');});$('.webform-button--submit').after('<i></i>');$('body').on('submit','#sarchform',function(event){$('#sarchform .search_error').remove();event.preventDefault();var searhKeyword=$.trim($('#sarchform input#search').val());if(searhKeyword=='')$('#sarchform input#search').after('<div class="search_error">'+Drupal.t('Please enter the search keyword.')+'</div>');else{var url=$(this).attr('action');var separator=url.indexOf('?')===-1?'?':'&';url=url+separator+'searchterm='+encodeURIComponent(searhKeyword);window.location.href=url;}});$('body').on('input','#sarchform input#search',function(event){$('#sarchform .search_error').remove();var searhKeyword=$.trim($(this).val());if(searhKeyword=='')$('#sarchform input#search').after('<div class="search_error">'+Drupal.t('Please enter the search keyword.')+'</div>');});$('body').on('change','.webform-submission-register-your-interest-prop-detl-form select[name="property_type"]',function(){var pType=$(this).find("option:selected").attr('data-ptype');var projectValue=$(this).find("option:selected").data('value');if(projectValue!=undefined&&projectValue=='not_decided_yet'){var form=$(this).closest('.webform-submission-register-your-interest-prop-detl-form');var typeField=$(form).find('select[name="type"]');if(typeField.length>0)if(typeField.next('label.error').length>0)typeField.next('label.error').css('display','none');}if(typeof pType!=='undefined'&&pType!==false)$('.webform-submission-register-your-interest-prop-detl-form select[name="type"]').val(pType);findUnitTypes($(this));$('.webform-submission-register-your-interest-prop-detl-form input[name="property_name"]').val($(this).find("option:selected").text());});function findUnitTypes(field=false){if(field)var pType=$(field).val();else var pType=$('.webform-submission-register-your-interest-prop-detl-form select[name="property_type"]').val();var langCode=drupalSettings.path.currentLanguage;if(pType=='')pType='empty';if(langCode=='en')var ajaxPath='/get-property-unit-types/'+pType;else var ajaxPath='/'+langCode+'/get-property-unit-types/'+pType;if(field)$(field).closest('.webform-submission-register-your-interest-prop-detl-form').find('select[name="unit_type"]').html('<option value="" selected="selected">'+Drupal.t('Unit Type')+'</option>');else $('.webform-submission-register-your-interest-prop-detl-form select[name="unit_type"]').html('<option value="" selected="selected">'+Drupal.t('Unit Type')+'</option>');$.get(ajaxPath,function(data,status){var unitTypes=data.bedrooms;var temp=$('<select>').html(unitTypes);var unitTypeNumbers=temp.find('option').filter(function(){return $(this).val().trim()!=='';}).length;if(field){if($('.page-node-type-properties-in-dubai').length>0&&unitTypeNumbers===0)$(field).closest('.webform-submission-register-your-interest-prop-detl-form').find('input[name="unit_type_optional"]').prop('checked',true).trigger('change');$(field).closest('.webform-submission-register-your-interest-prop-detl-form').find('select[name="unit_type"]').html(unitTypes);}else{if($('.page-node-type-properties-in-dubai').length>0&&unitTypeNumbers===0)$('.webform-submission-register-your-interest-prop-detl-form input[name="unit_type_optional"]').prop('checked',true).trigger('change');$('.webform-submission-register-your-interest-prop-detl-form select[name="unit_type"]').html(unitTypes);}},"json");}if($('.career-lists-sec .accordion').length>0)$('.career-lists-sec .accordion-item').each(function(index){var positionTitle=$.trim($(this).find('.acc-title').text());$(this).find('input[name="position_applied"]').val(positionTitle);});$('.login-frm .form-item').addClass('form-div');$('.login-frm .form-submit').addClass('submit-bttn');var activeLang=$('html').attr('lang');function changeCountryForWebform(countryCode,changeEl,targetEl){if(changeEl=='phone')targetEl.intlTelInput("setCountry",countryCode);else{if(changeEl=='country')targetEl.val(countryCode).trigger('change');}}if($('input[name="time_spent"]').length>0){var timeStart=new Date();var endTime=new Date();var time=setInterval(function(){endTime=new Date();var elapsedMilliseconds=endTime-timeStart;var elapsedFormatted=parseMillisecondsIntoReadableTime(elapsedMilliseconds);$('input[name="time_spent"]').val(elapsedFormatted);},1000);}if($('.node-title').length>0){var nodeTitle=$('.node-title').text();if($('.webform-submission-register-your-interest-prop-detl-form').length>0){}else{if($('.webform-submission-form input[name="property_name"]').length>0)$('.webform-submission-form input[name="property_name"]').val(nodeTitle);}}if($('.webform-submission-form').find('select[name="country[country]"]').length>0)$('body',context).on('change','.webform-submission-channel-partner-registration-form select[name="country[country]"]',function(){if($(this).closest('.webform-submission-form').find('input[name="phone"]').length>0){var countryCode=$(this).val().toLowerCase();changeCountryForWebform(countryCode,'phone',$(this).closest('.webform-submission-form').find('input[name="phone"]'));}});$('body',context).on('click','.webform-submission-form li.iti__country',function(){var cCode=$(this).find('.iti__dial-code').text();$(this).closest('.webform-submission-form').find('input[name="country_code"]').val(cCode);if($(this).closest('.webform-submission-form').find('select[name="country[country]"]').length>0){var countryCode=$(this).data('country-code').toUpperCase();changeCountryForWebform(countryCode,'country',$(this).closest('.webform-submission-form').find('select[name="country[country]"]'));}});$('body',context).on('keydown','.webform-submission-form li.iti__country',function(e){if(e.key!=='Enter')return;var cCode=$(this).find('.iti__dial-code').text();$(this).closest('.webform-submission-form').find('input[name="country_code"]').val(cCode);if($(this).closest('.webform-submission-form').find('select[name="country[country]"]').length>0){var countryCode=$(this).data('country-code').toUpperCase();changeCountryForWebform(countryCode,'country',$(this).closest('.webform-submission-form').find('select[name="country[country]"]'));}});if(/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent)){var activeTelInputWebformMobile=false;$(document).on('click','.iti__selected-flag',function(){activeTelInputWebformMobile=$(this).closest('.webform-submission-form');});$(document).on('click','li.iti__country',function(){var cCode=$(this).find('.iti__dial-code').text();if($(activeTelInputWebformMobile).length>0){$(activeTelInputWebformMobile).find('input[name="country_code"]').val(cCode);if($(activeTelInputWebformMobile).find('select[name="country[country]"]').length>0){var countryCode=$(this).data('country-code').toUpperCase();changeCountryForWebform(countryCode,'country',$(activeTelInputWebformMobile).find('select[name="country[country]"]'));}}});}if($('body').hasClass('page-node-type-property-landing-page')||$('body').hasClass('page-node-type-group-property-listing')||$('body').hasClass('page-taxonomy-property-sub-type'))window.waitForSwiperJs(()=>{var swiper=new Swiper(".project-slider-div .swiper",{slidesPerView:1,spaceBetween:0,loop:true,speed:800,pagination:{el:".swiper-pagination"},navigation:{nextEl:".project-slider-div .swiper-button-next",prevEl:".project-slider-div .swiper-button-prev"},breakpoints:{320:{slidesPerView:1,spaceBetween:0},768:{slidesPerView:1,spaceBetween:0},1024:{slidesPerView:1,spaceBetween:0},1280:{slidesPerView:1,spaceBetween:0}}});});$('body').on('change','.bl-expose-wrapper .articleMonth',function(){var month=$(this).val();$('.bl-expose-wrapper #edit-field-article-month-value').val(month);$(this).closest('.views-exposed-form').find('.form-submit').trigger('click');});$('body').on('change','.bl-expose-wrapper .articleYear',function(){var year=$(this).val();$('.bl-expose-wrapper #edit-field-article-year-value').val(year);$(this).closest('.views-exposed-form').find('.form-submit').trigger('click');});function parseMillisecondsIntoReadableTime(milliseconds){var hours=milliseconds/(1000*60*60);var absoluteHours=Math.floor(hours);var h=absoluteHours>9?absoluteHours:'0'+absoluteHours;var minutes=(hours-absoluteHours)*60;var absoluteMinutes=Math.floor(minutes);var m=absoluteMinutes>9?absoluteMinutes:'0'+absoluteMinutes;var seconds=(minutes-absoluteMinutes)*60;var absoluteSeconds=Math.floor(seconds);var s=absoluteSeconds>9?absoluteSeconds:'0'+absoluteSeconds;return h+':'+m+':'+s;}$(window).on('load',function(){const formShowDiv=document.getElementById('form-main-div');const formPrices=document.querySelector('.formPrices');if(formShowDiv)formShowDiv.classList.add('show');if(formPrices)formPrices.classList.add('show');$('#close-bttn-form').on('click',function(){formShowDiv.classList.remove('show');formPrices.classList.remove('show');});});if($('#form-main-click').length>0&&$('#form-main-div').length>0&&$('#close-bttn-form').length>0){const formClickMain=document.getElementById('form-main-click');const formShowDiv=document.getElementById('form-main-div');const closeFormSec=document.getElementById('close-bttn-form');const formPrices=document.querySelector('.formPrices');function formopenfunction(){formShowDiv.classList.add('show');formPrices.classList.add('show');}function formClosefunction(){formShowDiv.classList.remove('show');formPrices.classList.remove('show');}formClickMain.addEventListener('click',formopenfunction);closeFormSec.addEventListener('click',formClosefunction);const seekJobClickMain=document.getElementById('seek-job-click');const seekJobShowDiv=document.getElementById('seek-job-div');const closeseekJob=document.getElementById('close-bttn-seek-job');function seekopenfunction(){seekJobShowDiv.classList.add('show');}function seekClosefunction(){seekJobShowDiv.classList.remove('show');}seekJobClickMain.addEventListener('click',seekopenfunction);closeseekJob.addEventListener('click',seekClosefunction);const cLinkClickMain=document.getElementById('c-link-click');const cLinkShowDiv=document.getElementById('c-link-div');const closecLink=document.getElementById('close-bttn-c-link');function cLinkopenfunction(){cLinkShowDiv.classList.add('show');}function cLinkClosefunction(){cLinkShowDiv.classList.remove('show');}cLinkClickMain.addEventListener('click',cLinkopenfunction);closecLink.addEventListener('click',cLinkClosefunction);}if($('body').hasClass('page-node-type-property-landing-page')){const $vrModal=jQuery('#VRpopup');const $container=jQuery('#vrIframeContainer');if($vrModal.length){const $walkthroughSelect=jQuery('#VRpopup #walkthroughSelect');if($walkthroughSelect.length)jQuery(once('walkthrough-select',$walkthroughSelect)).change(function(){const selectedUrl=jQuery(this).find('option:selected').data('url');const $iframe=$container.find('iframe');if($iframe.length&&selectedUrl)$iframe.attr('src',selectedUrl);});$vrModal.on('shown.bs.modal',function(event){const triggerButton=jQuery(event.relatedTarget);if($(triggerButton).closest('div.button-main').find('.walkthrough-hidden-options').length>0){var walkthroughOptionsHTML=$(triggerButton).closest('div.button-main').find('.walkthrough-hidden-options').html();if(walkthroughOptionsHTML)$walkthroughSelect.html(walkthroughOptionsHTML);}let iframeUrl=triggerButton.data('url');if(!iframeUrl){$container.html('<p class="text-danger">No walkthrough available.</p>');return;}if(/^http:\/\//i.test(iframeUrl))iframeUrl=iframeUrl.replace(/^http:\/\//i,'https://');if($container.find('iframe').length===0){const $iframe=jQuery('<iframe>',{src:iframeUrl,style:'border:none;',allowfullscreen:true,width:'100%',height:'100%'});$container.append($iframe);}if($walkthroughSelect.length)$walkthroughSelect.find('option').each(function(){let optionUrl=jQuery(this).data('url');if(optionUrl&&optionUrl.startsWith('http://'))optionUrl=optionUrl.replace(/^http:\/\//i,'https://');jQuery(this).prop('selected',optionUrl===iframeUrl);});});$vrModal.on('hidden.bs.modal',function(){$container.empty();$walkthroughSelect.empty();if(window.location.hash)history.replaceState(null,'',window.location.pathname+window.location.search);});}}}};}(jQuery));(function($,Drupal,drupalSettings){Drupal.behaviors.my_download_behavior={attach(context,settings){window.dataLayer=window.dataLayer||[];if(gtm_enabled==true)$.fn.addToDLayerContact=function($dataLayer){window.dataLayer.push({'event':$dataLayer['event'],'form':{'name':$dataLayer['name'],'email':$dataLayer['email'],'phone':$dataLayer['phone'],'nationality':$dataLayer['nationality'],'interested_in':$dataLayer['interested_in']}});if(web_engage_enabled==true){var host=window.location.origin;var currentPath=window.location.pathname;if($dataLayer['name'].includes(" ")){const nameParts=$dataLayer['name'].split(" ");firstName=nameParts[0];lastName=nameParts.slice(1).join(" ");}else{firstName=$dataLayer['name'];lastName=$dataLayer['name'];}webengage.user.setAttribute('we_first_name',firstName);webengage.user.setAttribute('we_last_name',lastName);webengage.user.setAttribute('we_email',$dataLayer['email']);webengage.user.setAttribute('we_phone',formatPhoneNumberWEngage($dataLayer['phone']));webengage.track("Enquiry form submitted",{"First Name":firstName??'',"Last Name":lastName??'',"Email":$dataLayer['email']??'',"Nationality":$dataLayer['nationality'],"Phone number":$dataLayer['phone'],"Interested":$dataLayer['interested_in'],"Page URL":host+currentPath});}};;$.fn.addToDLayerUplift=function($dataLayer){if(gtm_enabled==true)window.dataLayer.push({'event':$dataLayer['event'],'form':{'first_name':$dataLayer['first_name'],'last_name':$dataLayer['last_name'],'email':$dataLayer['email'],'phone':$dataLayer['phone'],'property_name':$dataLayer['property_name'],'property_type':$dataLayer['property_type'],'unit_type':$dataLayer['unit_type'],'connect_method':$dataLayer['connect_method'],'organisation_name':$dataLayer['organisation_name'],'lead_reference_id':$dataLayer['sid']}});if(web_engage_enabled==true){var webEngageEvent='';if($("#popupfromHeading").length&&$("#popupfromHeading").text()=='LIKE WHAT YOU SEE?')webEngageEvent='Free consultation form';else webEngageEvent=$dataLayer['webengage_event'];webengage.user.setAttribute('we_first_name',$dataLayer['first_name']);webengage.user.setAttribute('we_last_name',$dataLayer['last_name']);webengage.user.setAttribute('we_email',$dataLayer['email']);webengage.user.setAttribute('we_phone',formatPhoneNumberWEngage($dataLayer['phone']));webengage.track(webEngageEvent,{"Project Name":$dataLayer['webengage_project_name']??'',"Project Id":$dataLayer['webengage_project_id']??'',"Email":$dataLayer['email']??'',"Phone":formatPhoneNumberWEngage($dataLayer['phone'])??'',"First Name":$dataLayer['first_name']??'',"Last Name":$dataLayer['last_name']??'',"Page URL":$dataLayer['webengage_page_url']??'',"Mode":$dataLayer['connect_method']??'',"lead_reference_id":$dataLayer['sid']});}};$.fn.addToEmailSubscription=function($webEngage){if(web_engage_enabled==true){if($webEngage['concent']=='1')var concent='Yes';else var concent='No';try{webengage.user.setAttribute('we_first_name',$webEngage['name']);webengage.user.setAttribute('we_last_name',$webEngage['name']);webengage.user.setAttribute('we_email',$webEngage['email']);webengage.user.setAttribute('we_phone',formatPhoneNumberWEngage($webEngage['phone']));webengage.track("Email Subscription",{"First Name":$webEngage['name'],"Email":$webEngage['email'],"Phone":formatPhoneNumberWEngage($webEngage['phone']),"Concent":concent});webengage.track("Newsletter button submitted",{"First Name":$webEngage['name'],"Email":$webEngage['email'],"Phone":formatPhoneNumberWEngage($webEngage['phone']),"Concent":concent});return true;}catch(e){console.log(e);return true;}}};$.fn.addToDLayerEmailSubscription=function($dLayer){if(gtm_enabled==true)try{window.dataLayer.push({'event':$dLayer['event'],'form':{'first_name':$dLayer['name'],'email':$dLayer['email'],'phone':$dLayer['phone'],'concent':$dLayer['concent']?'Yes':'No'}});var dLayerObject={'event':'eventTracker','custom_event_name':'newsletter_subscription_success','event_weightage':10};window.dataLayer.push(dLayerObject);console.log('Newsletter form submission success event triggered: ',dLayerObject);}catch(e){console.log(e);return true;}};$.fn.pdfReportDownload=function($webEngage){$('#downloadModal').modal('hide');var link=document.createElement('a');link.href=$('.report_d_link').attr('href');link.download=$('.report_d_link').text();link.click();link.remove();reportTitle=$('#report_data').data("title");reportYear=$('#report_data').data("year");if($webEngage&&$webEngage!==''){console.log('Investor Relations downloaded:'+reportTitle);if(web_engage_enabled==true){webengage.user.setAttribute('we_first_name',$webEngage['first_name']);webengage.user.setAttribute('we_last_name',$webEngage['last_name']);webengage.user.setAttribute('we_email',$webEngage['email']);webengage.user.setAttribute('we_phone',formatPhoneNumberWEngage($webEngage['phone']));webengage.track("Investor Relations Download",{"First Name":$webEngage['first_name'],"Last Name":$webEngage['last_name'],"Email":$webEngage['email'],"Phone":formatPhoneNumberWEngage($webEngage['phone']),"Organization Name":$webEngage['organization_name'],"Page URL":$webEngage['page_url'],"Title":reportTitle??'',"Category":$webEngage['category'],"Year":reportYear??''});}}};$.fn.pdfBrochureDownload=function(filePath){$('#brochureDownloadModal').modal('hide');var dURL=$('.brochure-b-btn').attr('data-url');$('body').append('<a class="brochure_d_link" target="_blank" href="'+dURL+'" style="display:none;"></a>');$('.brochure_d_link').get(0).click();};$.fn.fName=function(fName){};}};Drupal.behaviors.sobhaBlogsBehavior={attach:function(context,settings){var webengageEvent='';var blogData=drupalSettings.blog_data;if(blogData){console.log(blogData.category+' viewed:'+blogData.pageTitle);if(web_engage_enabled==true)try{if(blogData.category=='Blogs')webengageEvent='Blog';else{if(blogData.category=='Press Release')webengageEvent='PR';}webengage.track(webengageEvent+" viewed",{"Page URL":blogData.pageUrl,"Blog name":blogData.pageTitle,"Blog Category":blogData.category});}catch(e){console.log(e);}}}};Drupal.behaviors.sobhaPropertyBehavior={attach:function(context,settings){var propertyData=drupalSettings.property_data;if(propertyData){console.log('Property viewed: '+propertyData.projectName);if(web_engage_enabled==true)try{webengage.track(propertyData.eventName,{"Project Name":propertyData.projectName,"Project Id":propertyData.projectId,"Project Category":propertyData.projectCategory,"Image":propertyData.imagePath});const now=new Date();const formattedDateTime=now.toISOString().slice(0,19);var host=window.location.origin;var currentPath=window.location.pathname;var eventData={'anonymousId':webengage.state?.getForever()?.luid,'eventName':"Property Viewed Composite",'contentType':"property",'eventTime':formattedDateTime,'eventData':{"Project Name":propertyData.projectName,"Project Id":propertyData.projectId,"Project Category":propertyData.projectCategory,"property Url":host+currentPath,"brochure Url":propertyData.brochureFile,"image Slider":propertyData.imageSlider,"image Banner":propertyData.imageBanner}};fetch('/webengage-events/save',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(eventData)}).then((response)=>response.json()).then((data)=>{console.log(data);}).catch((error)=>console.error('Error:',error));}catch(e){console.log(e);}}if($('.listing-wrapper .river-side-row').length>0)$(once("property-scroll-to-form",'.listing-wrapper .river-side-row a.learn-more.ignored-from-listing')).click(function(){var propertyId=$(this).data('nid');if(propertyId)$('#footer-common-form form select[name="property_type"]').val(propertyId).trigger('change');});}};})(jQuery,Drupal,drupalSettings);function BannerClicked(projectName,projectType,projectId){console.log('BannerClicked:'+projectName,projectType,projectId);if(web_engage_enabled==true)try{webengage.track("Banner Clicked",{"Banner Name":"New Launches","Project Name":projectName,"Project Type":projectType,"Project Id":projectId});return true;}catch(e){console.log(e);return true;}}function HomeButtonClicked(eventName){console.log('HomeButtonClicked');if(web_engage_enabled==true)try{webengage.track("Home Button Clicked",{});return true;}catch(e){console.log(e);return true;}}function LanguageButtonClicked(Language){console.log('LanguageButtonClicked'+Language);if(web_engage_enabled==true)try{webengage.track("Language Button Clicked / Selected",{"Language":Language});return true;}catch(e){console.log(e);return true;}}function BrochureDownloaded(projectName,projectType,projectId){console.log('BrochureDownloaded:'+projectName,projectType,projectId);try{webengage.track("Brochure Download",{"Project Name":projectName,"Project Type":projectType,"Project Id":projectId});return true;}catch(e){console.log(e);return true;}}function TourButtonClicked(pageUrl){console.log('TourButtonClicked:'+pageUrl);try{webengage.track("3D tour clicked",{"Button Name":"3D TOUR","Page URL":pageUrl,"Section":"Footer"});return true;}catch(e){console.log(e);return true;}}function WhatsAppButtonClicked(pageUrl){console.log('WhatsAppButtonClicked:'+pageUrl);try{webengage.track("Whatsapp clicked",{"Page URL":pageUrl});return true;}catch(e){console.log(e);return true;}}function CallButtonClicked(pageUrl,ProjectName){console.log('CallButtonClicked:'+pageUrl,ProjectName);try{webengage.track("Call button clicked",{"Page URL":pageUrl,"Project Name":ProjectName});return true;}catch(e){console.log(e);return true;}}function EnquiryformClicked(isRequestCallBack,pageUrl,ProjectName,event=false){if(event&&event.preventDefault)event.preventDefault();console.log('EnquiryformClicked :'+isRequestCallBack,pageUrl,ProjectName);try{if(isRequestCallBack=="1"){console.log("RequestCallBack event");webengage.track("Request a Callback",{"Page URL":pageUrl,"Project Name":ProjectName});}else webengage.track("Enquiry form clicked",{"Page URL":pageUrl,"Project Name":ProjectName});return true;}catch(e){console.log(e);return true;}}function SocialMediaClicked(platform){console.log('SocialMediaClicked:'+platform);if(web_engage_enabled==true)try{webengage.track("Social Media Clicked",{"Platform":platform});return true;}catch(e){console.log(e);return true;}}function downloadReportClicked(title,year){console.log('Reports Downloaded:'+title,year);if(web_engage_enabled==true)try{webengage.track("Reports Downloaded",{"Year":year,"Title":title});return true;}catch(e){console.log(e);return true;}}function investorRelationsClicked(title,category,year){console.log('Investor Relations Clicked:'+title,category,year);if(web_engage_enabled==true)try{var host=window.location.origin;var currentPath=window.location.pathname;webengage.track("Investor Relations Clicked",{"Page URL":host+currentPath,"Title":title,"Category":category,"Year":year});return true;}catch(e){console.log(e);return true;}}function DiscoverNow(Type){console.log('Discover Now:'+Type);if(web_engage_enabled==true)try{webengage.track("Discover Now",{"Type":Type??''});return true;}catch(e){console.log(e);return true;}}function PropertyViewed(projectName,projectId){console.log('PropertyViewed:'+projectName,projectId);if(web_engage_enabled==true)try{webengage.track("Property Viewed",{"Project Name":projectName??'',"Project Id":projectId??''});return true;}catch(e){console.log(e);return true;}}function formatPhoneNumberWEngage(input){input=input.replace(/\s+/g,'');input=input.replace(/\+{2,}/g,'+');input=input.replace(/^(\+\d+)\+\1/,'$1');return input;}function copyToClipboard(text,triggerAlert=true){if(navigator.clipboard&&window.isSecureContext)navigator.clipboard.writeText(text).then(()=>{if(triggerAlert)alert('Link copied!');else jQuery('.share-alert-message').text(Drupal.t('Link copied!')).css('display','block');}).catch((err)=>{console.error('Failed to copy: ',err);if(triggerAlert)alert('Failed to copy link.');else jQuery('.share-alert-message').text(Drupal.t('Failed to copy link.')).css('display','block');});else{const textarea=document.createElement('textarea');textarea.value=text;textarea.style.position='fixed';textarea.style.top=0;textarea.style.left=0;document.body.appendChild(textarea);textarea.focus();textarea.select();try{const successful=document.execCommand('copy');if(triggerAlert)alert(successful?'Link copied!':'Failed to copy link.');else if(successful)jQuery('.share-alert-message').text(Drupal.t('Link copied!')).css('display','block');else jQuery('.share-alert-message').text(Drupal.t('Failed to copy link.')).css('display','block');}catch(err){console.error('Fallback copy failed: ',err);if(triggerAlert)alert('Copy not supported on this browser.');else jQuery('.share-alert-message').text(Drupal.t('Copy not supported on this browser.')).css('display','block');}document.body.removeChild(textarea);}setTimeout(function(){jQuery('.share-alert-message').css('display','none');},5000);}function openEnquiryModal(id){return jQuery(id).modal('show');};
